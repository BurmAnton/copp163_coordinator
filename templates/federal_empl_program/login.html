{% extends "layout.html" %}
{% load static %}
{% block title %}{{page_name}}{% endblock %}

{% block style %}
        <link href="{% static 'federal_empl_program/css/login.css' %}" rel="stylesheet">
{% endblock %}

{% block script %}
    <script src="{% static 'federal_empl_program/js/login.js' %}"></script>
{% endblock %}

{% block body %}
    <div class="modal fade" id="InstructionModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="InstructionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="InstructionModalLabel">Спасибо за регистрацию!</h5>
                </div>
                <div class="modal-body">
                    <p>Ваша предварительная заявка принята. Отправили на указанную почту дальнейшие инструкции по старту обучения.</p>
                    <p>
                        Теперь Вам доступен список ближайших групп для предварительной записи. 
                        После записи в группу с Вами свяжется представитель выбранного центра обучения.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary cont-btn">Перейти к выбору группы</button>
                </div>
            </div>
        </div>
    </div>

    {% if stage == 'registration' %}
        <div style="display: none;" class="stage">registration</div>
    {% else %}
        <div style="display: none;" class="stage">login</div>
    {% endif %}

    <div class="row justify-content-center align-self-center">
        <div class="card sign-card">
            <div class="form-title"><p>Авторизация</p></div>
            <div class="alert alert-danger" role="alert"></div>
        <!--Авторизация-->
            <div class="sign-form">
                <form action="{% url 'login' %}" method="post">
                    <input style="display: none;" type="input" class="form-control input-c" name="c">
                    <div class="input-group mb-3">
                        <input type="email" class="form-control email-login" name="email" placeholder="Email" aria-label="Email" aria-describedby="at">
                        <span class="input-group-text" id="at">@</span>
                    </div>
                    <div class="input-group mb-3 password-input">
                        <input type="password" class="form-control" name="password" placeholder="Пароль" id="InputPassword" required>
                        <button class="btn btn-outline-secondary sign-button" type="submit">Войти</button>
                    </div>
                    {% if message %}
                        <div class="alert alert-danger d-flex align-items-center" role="alert">
                            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                            <div>
                                {{message}}
                            </div>
                        </div>
                    {% endif %}
                </form>
                <div>
                    <button class="btn btn-view btn-primary reg-button" data-section="1">
                        Регистрация
                    </button>
                </div>
                <div id="SignUpHelp" class="form-text pass-recovery">Забыли пароль или не можете войти?</div>
                  
            </div>
        <!--Востановление пароля-->
            <div class="pass-rec-form" style="display:none;">
                    <div class="rec-instruction">
                        <p>Введите Ваш email и мы пришлём вам код для востановления пароля.</p>
                    </div>
                    <div class="input-group mb-3 email-step">
                        <input type="email" class="form-control email-recovery" name="email" placeholder="Email" aria-label="Email" aria-describedby="at">
                        <span class="input-group-text" id="at">@</span>
                    </div>
                    <div class="input-group mb-3 code-step" style="display:none;">
                        <input type="input" class="form-control code-recovery" name="code" id="code" placeholder="Код востановления" aria-label="Code" required>
                    </div>
                    <div class="input-group mb-3 password-step" style="display:none;">
                        <input type="password" class="form-control password-recovery" name="password" id="Password" placeholder="Введите новый пароль" aria-label="Password" required>
                    </div>
                    <div class="input-group mb-3 password-step" style="display:none;">
                        <input type="password" class="form-control confirmation-recovery" name="confirmation" id="Confirmation" placeholder="Повторите пароль" aria-label="Сonfirmation" required>
                    </div>
                    <div class="alert-recovery">
                        <div class="alert alert-warning d-flex align-items-center" role="alert">
                            <p></p>
                        </div>
                    </div>
                    <div class="d-grid gap-2">
                        <button class="btn btn-recovery-code"></button>
                    </div>
            </div>
        <!--Регистрация-->
            <div class="reg-form">
                <div class="reg-form-type"></div>
                <form onsubmit="myFunction(); return false;" method="POST">
                <!--Название шага-->
                    <div class="step-title" style="text-align:center;"><h5>Шаг 1/3: Данные родителя</h5></div>
                <!--Личные данные-->
                    <div class="input-group mb-3 first-step first-step-mandatory">
                        <input type="input" class="form-control" name="last_name" id="LastName" placeholder="Фамилия" onkeydown="return /[a/а-я]/i.test(event.key)">
                    </div>
                    <div class="input-group mb-3 first-step first-step-mandatory">
                        <input type="input" class="form-control" name="name" id="Name" placeholder="Имя" onkeydown="return /[a/а-я]/i.test(event.key)" required>
                    </div>
                    <div class="input-group mb-3 first-step first-step-optional">
                        <input type="input" class="form-control" name="middle_name" id="MiddleName" placeholder="Отчество" onkeydown="return /[a/а-я]/i.test(event.key)">
                    </div>
                    <label class="form-check-label first-step" for="Birthday">Дата рождения</label>
                    <div class="input-group mb-3 first-step first-step-mandatory">
                        <input type="date" class="form-control" name="birthday" id="Birthday" placeholder="Дата рождения" required>
                    </div>
                    
                    <div class="first-step">
                        <label class="form-check-label ">Укажите свой пол</label>
                    </div>
                    <div class="first-step">
                        <div class="form-check form-check-inline">
                            <input style="margin-top: 4px;" class="form-check-input" type="radio" name="GenderOptions" id="MaleOptions" value="male" checked>
                            <label class="form-check-label" for="MaleOptions">Мужской</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input style="margin-top: 4px;" class="form-check-input" type="radio" name="GenderOptions" id="FemaleOptions" value="female">
                            <label class="form-check-label" for="FemaleOptions">Женский</label>
                        </div>  
                    </div>
                <!--Параметры обучения-->
                    <label class="form-check-label second-step" for="education_lvl">Уровень образования</label>
                    <div class="form mb-3 second-step">
                        <select class="selectpicker second-step second-step-mandatory-select" data-width="100%" data-live-search="true" id="Education_lvl" name="education_lvl" required>
                            <option value="">Выберите уровень образования</option>
                            <option value="university">Имею диплом о среднем профессиональном или высшем образовании</option>
                            <option value="fy_student">Студент и завершаю обучение в 2022 году</option>
                            <option value="student">Студент</option>
                            <option value="school">Не имею образования/учусь в школе</option>
                        </select>
                    </div>
                    <label class="form-check-label second-step" for="education_goal">Текущий статус трудоустройства</label>
                    <div class="form mb-3 second-step">
                        <select class="selectpicker second-step second-step-mandatory-select" data-width="100%" data-live-search="true" id="Empl_status" name="empl_status" required>
                            <option value="">Выберите трудовой статус</option>
                            <option value="empl">Трудоустроен (официально)</option>
                            <option value="vacation">В отпуске по уходу за ребёнком до 3-х лет</option>
                            <option value="unempl_czn">Безработный (зарегестрирован в центре занятости) </option>
                            <option value="unempl">Безработный (не зарегестрирован в центре занятости)</option>
                        </select>
                    </div>
                    <label class="form-check-label second-step" for="convenient_time">Удобное время для занятий</label>
                    <div class="form mb-3 second-step">
                        <select class="selectpicker second-step second-step-mandatory-select" data-width="100%" data-live-search="true" id="Convenient_time" name="convenient_time" required>
                            <option value="">Выберите время</option>
                            <option value="MRNG">9:00-13:00</option>
                            <option value="DAYT">13:00-17:00</option>
                            <option value="EVNG">17:00-21:00</option>
                        </select>
                    </div>
                    <label class="form-check-label second-step" for="convenient_time">Готовность приступить к обучение</label>
                    <div class="form mb-3 second-step">
                        <select class="selectpicker second-step second-step-mandatory-select" data-width="100%" data-live-search="true" id="Education_time" name="education_time" required>
                            <option value="">Выберите срок</option>
                            <option value="week">В течение 1 недели</option>
                            <option value="month">В течение месяца</option>
                            <option value="ltr_month">Позднее чем через месяц</option>
                        </select>
                    </div>
                    <label class="form-check-label second-step" for="education_goal">Планируемая занятость после обучения</label>
                    <div class="form mb-3 second-step">
                        <select class="selectpicker second-step second-step-mandatory-select" data-width="100%" data-live-search="true" id="Education_goal" name="education_goal" required>
                            <option value="">Выберите занятость</option>
                            <option value="RECA">Открытие своего дела (ИП или самозанятость)</option>
                            <option value="RECD">Трудоустройство на новую работу</option>
                            <option value="CONT">Сохранение текущего места работы</option>
                        </select>
                    </div>
                    <div class="form-check second-step second-step-optional">
                        <input class="form-check-input elderly-check" type="checkbox" id="elderly-check" name="elderly-check">
                        <label class="form-check-label elderly-check" for="elderly-check">Имею статус предпенсионера</label>
                    </div>
                <!--Финальный шаг-->
                    <div class="input-group mb-3 auth-step">
                        <input type="input" class="form-control" name="snils" id="Snils" placeholder="Номер СНИЛС" minlength="11" maxlength="11" onkeydown="return /[0-9 Backspace]+/i.test(event.key)" required>
                    </div>
                    <div class="input-group mb-3 auth-step">
                        <input type="email" class="form-control reg-email" name="email" id="Email" placeholder="Email" required>
                    </div>
                    <div class="input-group mb-3 auth-step">
                        <input type="phone2numeric" class="form-control" name="phone" id="Phone" placeholder="Номер телефона" maxlength="18" onkeydown="return /[+ ( ) 0-9 Backspace]+/i.test(event.key)" required>
                    </div>
                    <div class="input-group mb-3 auth-step">
                        <input type="password" class="form-control" name="password" id="InputPasswordReg" placeholder="Пароль" required>
                    </div>
                    <div class="input-group mb-3 auth-step">
                        <input type="password" class="form-control" name="confirmation" id="СonfirmPassword" placeholder="Повторите пароль" required>
                    </div>
                    <div class="form-check auth-step data-proc-agrement">
                        <input class="form-check-input" type="checkbox" id="personal-data-check" name="personal-data" required>
                        <label class="form-check-label" for="flexCheckDefault">
                            Соглашаюсь на обработку моих персональных данных в соответствии с Политикой конфиденциальности
                        </label>
                    </div>
                    {% if message %}
                        <div class="alert alert-danger d-flex align-items-center" role="alert">
                            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                            <div>
                                {{message}}
                            </div>
                        </div>
                    {% endif %}
                    <div class="d-grid gap-2 auth-step">
                        <button type="button" class="btn btn-primary btn-submit">Зарегистрироваться</button>
                    </div>
                </form>
            <!--Переходы-->
                <div class="reg-control mb-3 d-grid gap-2">
                    <button class="btn btn-view btn-secondary btn-forward disabled">Продолжить</button>
                    <button class="btn btn-view btn-dark btn-backward"  style="display:none;">Назад</button>
                    <div id="SignUpHelpReg" class="form-text finale-step" style="display:none;">Уже есть аккаунт? <a href="{% url 'login' %}">Войти</a></div>
                </div>
            </div>
        </div>
    </div>
    
{% endblock %}
