{% extends "region163_dashboard/layout.html" %}
{% load static %}

{% block title %}Статистика по ЦО{% endblock %}
{% block style %}
        <link href="{% static 'region163_dashboard/css/dashboard.css' %}" rel="stylesheet">
{% endblock %}
{% block script %}{% endblock %}

{% block body %}
    <div class="container px-4">
        <div class="row justify-content-center">
            <div class="col text-center">
                <h2>Список ближайщих групп по федеральному проекту "Содействие занятости"</h2>
            </div>
        
        </div>
        <form action="{% url 'dashboard' %}" method='post'>
        <div class="card filter bg-light">
            <h5 class="card-header">Фильтр</h5>
            <div class="row g-2">
                <div class="col-md">
                    <select class="selectpicker filter-select" data-width="95%" data-live-search="true" name="group_type" id="group_type">
                        {% if filter_status.0 == None %}
                            <option value='None'>Тип группы</option>
                            <option value="on" class="disability_type">Онлайн</option>
                            <option value="off" class="disability_type">Оффлайн</option>
                        {% elif filter_status.0 == "on" %}
                            <option value="on" class="disability_type">Онлайн</option>
                            <option value="off" class="disability_type">Оффлайн</option>
                            <option value='None'>Любой</option>
                        {% elif filter_status.0 == "off" %}
                            <option value="off" class="disability_type">Оффлайн</option>
                            <option value="on" class="disability_type">Онлайн</option>
                            <option value='None'>Любой</option>
                        {% endif %}
                    </select>
                    <select class="selectpicker filter-select" data-width="95%" data-live-search="true" name="city" id="city">
                        {% if filter_status.1 == None %}
                            <option value='None'>Город</option>
                            {% for city in cities %}
                                <option value="{{city}}" class="disability_type">{{city}}</option>
                            {% endfor %}
                        {% else %}
                            <option value='{{filter_status.1}}'>{{filter_status.1}}</option>
                            {% for city in cities %}
                                {% if city != filter_status.1 %}
                                    <option value="{{city}}" class="disability_type">{{city}}</option>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </select>
                </div>
                <div class="col-md">
                    <select class="selectpicker filter-select" data-width="95%" data-live-search="true" name="ed_center" id="ed_center">
                        {% if filter_status.2 == None %}
                                <option value='None'>Центр обучения</option>
                                {% for ed_center in ed_centers %}
                                    <option value="{{ed_center}}" class="disability_type">{{ed_center}}</option>
                                {% endfor %}
                        {% else %}
                                <option value='{{filter_status.2}}'>{{filter_status.2}}</option>
                                {% for ed_center in ed_centers %}
                                    {% if filter_status.2 != ed_center %}
                                        <option value="{{ed_center}}" class="disability_type">{{ed_center}}</option>
                                    {% endif %}
                                {% endfor %}
                        {% endif %}
                    </select>
                    <select class="selectpicker filter-select" data-width="95%" data-live-search="true" name="competence" id="competence">
                        {% if filter_status.3 == None %}
                                <option value='None'>Компетенция</option>
                                {% for competence in competencies %}
                                    <option value="{{competence}}" class="disability_type">{{competence}}</option>
                                {% endfor %}
                        {% else %}
                                <option value='{{filter_status.3}}'>{{filter_status.3}}</option>
                                {% for competence in competencies %}
                                    {% if filter_status.3 != competence %}
                                        <option value="{{competence}}" class="disability_type">{{competence}}</option>
                                    {% endif %}
                                {% endfor %}
                        {% endif %}
                    </select>
                </div>
            </div>
            <div class="row g-2 filter-submit text-end">
                <div class="col-md">
                    <input type="submit" class="btn btn-primary" value="Применить">
                </div>
            </div>
        </div>
        </form>
        <div class="row row-cols-2 g-3">
            {% for group in group_list.0 %}
            <div class="col">
                <div class="card border-dark">
                    <h5 class="card-header border-dark">Группа №{{group.id}}   {{group.competence}}</h5>
                    <div class="card-body">
                      <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <h6 class="card-title">{{group.education_center}}</h6>
                            </li>
                            <li class="list-group-item">
                                <p class="card-text ed_program">
                                    <b>
                                        Программа подготовки:
                                    </b> 
                                    {%if group.program.program_link != None%}
                                        <a href={{group.program.program_link}} target="_blank">
                                            {{group.program.program_name}}
                                        </a>
                                    {% else %}
                                        {{group.program.program_name}}
                                    {% endif %}
                                </p>
                                <p class="card-text ed_program"><b>Длительность подготовки:</b> {{group.program.duration}}ч.</p>
                                {%if group.study_period == 'MRNG'%}
                                    <p class="card-text ed_program"><b>Период проведения занятий:</b> 09:00-13:00</p>
                                {% endif %}
                                {%if group.study_period == 'DAYT'%}
                                    <p class="card-text ed_program"><b>Период проведения занятий:</b> 13:00-17:00</p>
                                {% endif %}
                                {%if group.study_period == 'EVNG'%}
                                    <p class="card-text ed_program"><b>Период проведения занятий:</b> 17:00-21:00</p>
                                {% endif %}
                                {%if group.study_days_count != None%}
                                    <p class="card-text"><b>Занятий в неделю:</b> {{group.study_days_count}}</p>
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                <p class="card-text start-date"><b>Дата начала:</b> {{group.start_date}}</p>
                                {% if group.end_date != None %}
                                    <p class="card-text"><b>Дата окончания:</b> {{group.end_date}}</p>
                                {% endif %}
                            </li>
                        </ul>
                    </div>
                    <div class="card-footer text-end border-dark">
                        {% if group.ed_schedule_link != None %}
                            <a href={{group.ed_schedule_link}} class="btn btn-dark" target="_blank">График обучения</a>
                        {% endif %}
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdmzY-KjLvBOUEnCMQFx6P-wnFYmlCyvRi77LsosDPBCT941A/viewform" class="btn btn-primary" target="_blank">
                            Записаться на обучение
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
