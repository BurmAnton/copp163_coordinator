{% extends "region163_dashboard/layout.html" %}
{% load static %}

{% block title %}Статистика по ЦО{% endblock %}
{% block style %}
    <link href="{% static 'region163_dashboard/css/ed_centers_empl.css' %}" rel="stylesheet">
{% endblock %}
{% block script %}{% endblock %}

{% block body %}
    <div class="container">
        <div class="row justify-content-around">
            <div class="card text-center mb-3" style="max-width: 12rem;">
                <div class="card-body">
                    <h5 class="card-title">Компетенций:</h5>
                    <h4 class="card-title">{{competencies_count}}</h4>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 18rem;">
                <div class="card-body">
                    <h5 class="card-title">Программ подготовки:</h5>
                    <h4 class="card-title">{{education_programs_count}}</h4>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 15rem;">
                <div class="card-body">
                    <h5 class="card-title">Центров обучения:</h5>
                    <h4 class="card-title">{{education_centers_count}}</h4>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 15rem;">
                <div class="card-body">
                    <h5 class="card-title">Заявок:</h5>
                    <h4 class="card-title">{{appl_count}}</h4>
                </div>
            </div>
        </div>
        <div class="row justify-content-around">
            <div class="card text-center mb-3" style="max-width: 15rem;">
                <div class="card-body">
                    <h5 class="card-title">Новых заявка: {{stages_count.0}}</h5>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 16rem;">
                <div class="card-body">
                    <h5 class="card-title">На верификации: {{stages_count.1}}</h5>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 15rem;">
                <div class="card-body">
                    <h5 class="card-title">Допущено: {{stages_count.2}}</h5>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 16rem;">
                <div class="card-body">
                    <h5 class="card-title">Начали обучение: {{stages_count.3}}</h5>
                </div>
            </div>
            <div class="card text-center mb-3" style="max-width: 17rem;">
                <div class="card-body">
                    <h5 class="card-title">Завершили обучение: {{stages_count.4}}</h5>
                </div>
            </div>
        </div>
    </div>


    <table class="table table-striped">
        <tr>
            <th scope="col" class="comp">Компетенция</th>
            <th scope="col" class="stage">Новая заявка</th>
            <th scope="col" class="stage">Верификация</th>
            <th scope="col" class="stage">Допущен</th>
            <th scope="col" class="stage">Начал обучение</th>
            <th scope="col" class="stage">Завершил обучение</th>
            <th scope="col" class="stage">Отчислен</th>
            <th scope="col" class="stage">Резерв</th>
        </tr>
        {% for comp_key, comp_value in stat.items %}
            {% if comp_value|get_item:'Empty' == False %}
                <tr class="table-dark"><td colspan="8" scope="row">{{comp_key}}</td></tr>
                {% for ed_key, ed_value in comp_value.items %}
                    {% if ed_value|get_item:'Empty' == False %}
                        <tr>
                            {% if ed_key != 'Empty'%}
                                <td scope="row" class="ed-center">{{ed_key}}</td>
                                {% for stage_key, stage_value in ed_value.items %}
                                    {% if stage_key != 'Empty' %}
                                        <td class="stages" data-stage={{stage_key}}>
                                            {{stage_value}}
                                        </td>
                                    {% endif %}
                                {% endfor %}
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endfor %}
    </table>
{% endblock %}
