{% extends "layout.html" %}
{% load static %}
{% load ed_centers_extras %}

{% block title %}Личный кабинет ЦО{% endblock %}
{% block style %}
        <link href="{% static 'education_centers/css/ed_center_application.css' %}" rel="stylesheet">
{% endblock %}
{% block script %}
    <script src="{% static 'education_centers/js/ed_center_application.js' %}" rel="stylesheet"></script>
{% endblock %}

{% block body %}
    {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or center_project_year.stage == 'FNSHD' or user.is_superuser %}
        <div class="modal fade add-employee-modal" id="AddEmployeeModal" tabindex="-1" aria-labelledby="AddEmployeeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="AddEmployeeModalLabel">Добавить сотрудника</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <div class="modal-body">
                            {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="LastNameInput" name="last_name" maxlength="30" placeholder="Фамилия" required>
                                <label for="LastNameInput">Фамилия</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="FirstNameInput" name="first_name" maxlength="30" placeholder="Имя" required>
                                <label for="FirstNameInput">Имя</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="MiddleNameInput" name="middle_name" maxlength="30" placeholder="Отчество">
                                <label for="MiddleNameInput">Отчество</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="PositionInput" name="position" maxlength="150" placeholder="Должность" required>
                                <label for="PositionInput">Должность</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="IsHeadCheckbox" name="is_head">
                                <label class="form-check-label" for="IsHeadCheckbox">
                                Руководитель организации
                                </label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="LastNameRInput" name="last_name_r" maxlength="30" placeholder="Фамииля (родительный падеж)" required>
                                <label for="LastNameRInput">Фамилия (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="FirstNameRInput" name="first_name_r" maxlength="30" placeholder="Имя (родительный падеж)" required>
                                <label for="FirstNameRInput">Имя (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="MiddleNameRInput" name="middle_name_r" maxlength="30" placeholder="Отчество (родительный падеж)">
                                <label for="MiddleNameRInput">Отчество (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="PositionRInput" name="position_r" maxlength="150" placeholder="Должность (родительный падеж)" required>
                                <label for="PositionRInput">Должность (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="EmailInput" name="email" placeholder="Email" required>
                                <label for="EmailInput">Email</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="phone" class="form-control" id="PhoneInput" name="phone" maxlength="120" placeholder="Телефон" required>
                                <label for="PhoneInput">Телефон</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="d-grid gap-2">
                                <input type="submit" class="btn btn-primary" name="add-employee" value="Сохранить">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% if project != 'bilet'%}
            <div class="modal fade add-program-modal" id="AddProgramModal" tabindex="-1" aria-labelledby="AddProgramModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddProgramLabel">Добавить программу</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Направление программы" data-live-search="true" name="competence_id" required>
                                        {% for competence in competencies %}
                                            <option value="{{competence.id}}">{{competence.title}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="ProgramNameInput" name="program_name" maxlength="500" placeholder="Название" required>
                                    <label for="ProgramNameInput">Название</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="ProfessionNameInput" name="profession" maxlength="200" placeholder="Профессия" required>
                                    <label for="ProfessionNameInput">Профессия</label>
                                </div>
                                <div class="mb-3">
                                    <label style="display: flex;align-items: center;" for="DescriptionInput" class="form-label" data-bs-toggle="tooltip" data-bs-html="true" title='ОПИСАНИЕ ЗАПОЛНЯЕТСЯ СТРОГО ПО ШАБЛОНУ! Шаблон описания программы:
        «Программа направлена на формирование компетенций в соответствии с трудовыми функциями (наименование профессии), далее прописать для программам ПО присваиваемый разряд (при наличии) для программ ДПО усваиваемую компетенцию».
        В результате обучения выпускник программы будет способен:
            • указать трудовые функции (компетенции) или 1-5 конкретных умений из программы ПО или ДПО.
        Особенности программы – программа направлена на формирование компетенций, необходимых для профессиональной деятельности в сфере _____________ (указать предполагаемую сферу деятельности по завершению обучения)'>
                                        <p style="margin-top: 1px;margin-bottom: 0px;">Описание </p>
                                        <img style="width: 21px; padding-left: 3px;" src="{% static 'education_centers/img/info-icon.png' %}" alt="info-icon">
                                    </label>
                                    <textarea class="form-control" id="DescriptionInput" name="description" rows="2">{{program.description}}</textarea>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Входные требования" data-live-search="true" name="entry_requirements" required>
                                        <option value="NDC">Без образования</option>
                                        <option value="SPO">Cреднее профессиональное образование</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Вид программы" data-live-search="true" name="program_type" required>
                                        <option value="DPOPK">ДПО ПК</option>
                                        <option value="DPOPP">ДПО ПП</option>
                                        <option value="POP">ПО П</option>
                                        <option value="POPP">ПО ПП</option>
                                        <option value="POPK">ПО ПК</option>
                                    </select>
                                </div>
                                <th scope="col"></th>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Форма обучения" data-live-search="true" name="education_form" required>
                                        <option value="PRTLN">Очно-заочная с применением ДОТ</option>
                                        <option value="FLLLN">Очная с применением ДОТ</option>
                                        <option value="PRT">Очно-заочная</option>
                                        <option value="FLL">Очная</option>
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="number" class="form-control" id="DurationInput" name="duration" placeholder="Длительность программы" required>
                                    <label for="DurationInput">Длительность программы</label>
                                </div>
                                <div class="mb-3">
                                    <label for="NotesInput" class="form-label">Примечания</p></label>
                                    <textarea class="form-control" id="NotesInput" name="notes" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="add-program" value="Сохранить">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="modal fade add-programs-modal" id="AddProgramsModal" tabindex="-1" aria-labelledby="AddProgramsModalLabel" aria-hidden="true">
                <div class="modal-dialog add-programs-modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddProgramsLabel">Добавить программы из банка программ</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                                <div id="table-wrapper">
                                    <div id="table-scroll">
                                        <table class="table ">
                                            <tr style="background-color: white;" class="sticky-top"> 
                                                <th scope="col"></th>
                                                <th scope="col">Профессия</th>
                                                <th scope="col">Профессиональная среда</th>
                                                <th scope="col">Краткое описание задания</th>
                                                <th scope="col">Автор программы</th>
                                                <th scope="col">Ссылка на программу</th>
                                                <th scope="col">Возрастные категории</th>
                                                {% for program in approved_programs %}
                                                <tr>
                                                    <td scope="row">
                                                        <div><input style="margin-left: 0;" type="checkbox" id="BankProgram{{program.id}}" name="{{program.id}}"></div>
                                                    </td>
                                                    <td scope="row"><label for="BankProgram{{program.id}}">{{program.profession}}</label></td>
                                                    <td scope="row">{{program.profession.prof_enviroment}}</td>
                                                    <td scope="row">{{program.description}}</td>
                                                    <td scope="row">{{program.author_name}}</td>
                                                    <td scope="row">
                                                        {% if program.program_link != None and program.program_link != "" %}
                                                            <a href="{{program.program_link}}" target="_blank">программа</a>
                                                        {%endif%}
                                                    </td>
                                                    <td scope="row">
                                                        {% for age_group in program.age_groups.all %}
                                                            {{ age_group.name }}<br>
                                                        {% endfor %}
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="add-programs" value="Добавить">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal fade add-program-modal" id="AddProgramModal" tabindex="-1" aria-labelledby="AddProgramModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddProgramLabel">Добавить программу</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Профессия" id="Profession" data-live-search="true" name="profession_id" required>
                                        {% for profession in professions %}
                                            <option value="{{profession.id}}">{{profession.name}} ({{profession.prof_enviroment__name}})</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="IsNewProfession" name="new_profession">
                                    <label class="form-check-label" for="IsNewProfession">Добавить новую профессию</label>
                                </div>
                                <div style="display: none;" class="form-floating mb-3">
                                    <input type="input" class="form-control" id="NewProfession" name="profession" maxlength="250" placeholder="Название профессии">
                                    <label for="NewProfession">Название профессии</label>
                                </div>
                                <div style="display: none;" class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Профессиональная среда" id="ProfEnviroment" data-live-search="true" name="prof_enviroment_id">
                                        {% for prof_enviroment in prof_enviroments %}
                                            <option value="{{prof_enviroment.id}}">{{prof_enviroment.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="ProgramLinkInput" name="program_link" maxlength="500" placeholder="Ссылка на программу" required>
                                    <label for="ProgramLinkInput">Ссылка на программу</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="DescriptionInput" name="description" maxlength="300" placeholder="Краткое описание задания" required>
                                    <label for="DescriptionInput">Краткое описание задания</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Автор" data-live-search="true" name="teacher_id" required>
                                        {% for teacher in teachers %}
                                            <option value="{{teacher.id}}">{{teacher.full_name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="EmailInput" name="email" placeholder="Email" required>
                                    <label for="EmailInput">Email автора</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="phone" class="form-control" id="PhoneInput" name="phone" maxlength="120" placeholder="Телефон" required>
                                    <label for="PhoneInput">Телефон автора</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Возрастные категории" data-live-search="true" name="age_groups" multiple required>
                                        {% for age_group in age_groups %}
                                            <option value="{{age_group.id}}">{{age_group.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="ОВЗ" data-live-search="true" name="disability_types" multiple>
                                        {% for disability_type in disability_types %}
                                            <option value="{{disability_type.id}}">{{disability_type.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="add-program" value="Сохранить">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        {%endif%}
            <div class="modal fade add-teacher-modal" id="AddTeacherModal" tabindex="-1" aria-labelledby="AddTeacherModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddTeacherLabel">Добавить педагога</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameTeacherInput" maxlength="30" name="last_name" placeholder="Фамилия" required>
                                    <label for="LastNameTeacherInput">Фамилия</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameTeacherInput" maxlength="30" name="first_name" placeholder="Имя" required>
                                    <label for="FirstNameTeacherInput">Имя</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameTeacherInput" maxlength="30" name="middle_name" placeholder="Отчество">
                                    <label for="MiddleNameTeacherInput">Отчество</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Тип трудоустройства" data-live-search="true" name="employment_type" required>
                                        <option value="STFF">Штатный педагогический сотрудник</option>
                                        <option value="TTRC">Привлеченный педагогический работник</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Программы профпроб (реализуемые педагогом)" data-live-search="true" name="programs" multiple>
                                        {% if project == 'bilet'%}
                                            {% for program in programs %}
                                                <option value="{{program.id}}">{{program}}</option>
                                            {% endfor %}
                                        {% else %}
                                            {% for program in programs %}
                                            <option value="{{program.id}}">{{program.program_name}}</option>
                                            {% endfor %}
                                        {% endif %}
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Уровень образования" data-live-search="true" name="education_level" required>
                                        <option value="VO">Высшее образование</option>
                                        <option value="SPO">Cреднее профессиональное образование</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="educationMajorTeacherInput">Укажите специализацию и квалификация</label>
                                    <input type="input" class="form-control" id="educationMajorTeacherInput" name="education_major" maxlength="150" placeholder="«Агрономия», квалификация Агроном">
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="positionTeacherInput" name="position" maxlength="150" placeholder="Ученая степень/должность">
                                    <label for="positionTeacherInput">Ученая степень/должность</label>
                                </div>
                                <div class="mb-3">
                                    <label for="ExperienceInput" class="form-label">Наличие опыта педагогической и/или производственной деятельности</label>
                                    <textarea class="form-control" id="ExperienceInput" name="experience" rows="2"></textarea>
                                </div>
                                {% if project == 'bilet' %}
                                    <div class="mb-3">
                                        <label for="ExperienceInput" class="form-label">Наличие профессиональных сертификаций по компетенции или диплома победителей/призеров конкурсов профмастерства</label>
                                        <textarea class="form-control" id="ExperienceInput" name="bvb_experience" rows="4"></textarea>
                                    </div>
                                {% else %}
                                    <div class="mb-3">
                                        <label for="AdditionalEducationInput" class="form-label">Наличие доп. проф. образования по профилю программы за последние 3 года и (или) опыт по профилю программы.</label>
                                        <textarea class="form-control" id="AdditionalEducationInput" name="additional_education" rows="2"></textarea>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="add-teacher" value="Сохранить">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal fade add-workshop-modal" id="AddWorkshopModal" tabindex="-1" aria-labelledby="AddWorkshopModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AddWorkshopLabel">Добавить помещение</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                            <div class="modal-body">
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="NameWorkshopInput" name="name" maxlength="500" placeholder="Название помещения" required>
                                    <label for="NameWorkshopInput">Название помещения</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Вид занятий" data-live-search="true" name="classes_type" required>
                                        <option value="T">Теоретические занятия</option>
                                        <option value="P">Практические занятия</option>
                                        <option value="TP">Практические и теоретические занятия</option>
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="AddressWorkshopInput" name="address" maxlength="500" placeholder="Адрес"required>
                                    <label for="NameWorkshopInput{{workshop.id}}">Адрес помещения</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Программы профпроб (реализуемые в аудитории)" data-live-search="true" name="programs" multiple>
                                        {% if project == 'bilet'%}
                                            {% for program in programs %}
                                                <option value="{{program.id}}">{{program}}</option>
                                            {% endfor %}
                                        {% else %}
                                            {% for program in programs %}
                                                <option value="{{program.id}}">{{program.program_name}}</option>
                                            {% endfor %}
                                        {% endif %}
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="EquipmentWorkshopInput" class="form-label">Оборудование, программное обеспечение.</label>
                                    <textarea class="form-control" id="EquipmentWorkshopInput" name="equipment" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="add-workshop" value="Сохранить">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
    {%endif%}
    {% if project == 'bilet'%}
        {% for employee in employees %}
            <div class="modal fade change-employee-modal" id="ChangeEmployeeModal{{employee.id}}" tabindex="-1" aria-labelledby="ChangeEmployeeModal{{employee.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ChangeEmployeeModal{{employee.id}}Label">Изменить сотрудника</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                                <input style="display: none;" type="input" name="employee_id" value="{{employee.id}}" required>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameInput{{employee.id}}" name="last_name" maxlength="30" placeholder="Фамилия" value="{{employee.last_name}}" required>
                                    <label for="LastNameInput{{employee.id}}">Фамилия</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameInput{{employee.id}}" name="first_name" maxlength="30" placeholder="Имя" value="{{employee.first_name}}" required>
                                    <label for="FirstNameInput{{employee.id}}">Имя</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameInput{{employee.id}}" name="middle_name" maxlength="30" placeholder="Отчество"  value="{{employee.middle_name}}">
                                    <label for="MiddleNameInput{{employee.id}}">Отчество</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="PositionInput{{employee.id}}" name="position" maxlength="150" placeholder="Должность" value="{{employee.position}}" required>
                                    <label for="PositionInput{{employee.id}}">Должность</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="IsHeadInput{{employee.id}}" name="is_head" {% if employee.is_head %} checked {% endif %}>
                                    <label class="form-check-label" for="IsHeadInput{{employee.id}}">Руководитель организации</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameRInput{{employee.id}}" name="last_name_r" maxlength="30" placeholder="Фамииля (родительный падеж)" value="{{employee.last_name_r}}" required>
                                    <label for="LastNameRInput{{employee.id}}">Фамилия (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameRInput{{employee.id}}" name="first_name_r" maxlength="30" placeholder="Имя (родительный падеж)" value="{{employee.first_name_r}}" required>
                                    <label for="FirstNameRInput{{employee.id}}">Имя (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameRInput{{employee.id}}" name="middle_name_r" maxlength="30" placeholder="Отчество (родительный падеж)" value="{{employee.middle_name_r}}">
                                    <label for="MiddleNameRInput{{employee.id}}">Отчество (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="PositionRInput{{employee.id}}" name="position_r" maxlength="150" placeholder="Должность (родительный падеж)" value="{{employee.position_r}}" required>
                                    <label for="PositionRInput{{employee.id}}">Должность (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="EmailInput{{employee.id}}" name="email" placeholder="Email" value="{{employee.email}}" required>
                                    <label for="EmailInput{{employee.id}}">Email</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="phone" class="form-control" id="PhoneInput{{employee.id}}" name="phone" maxlength="120" placeholder="Телефон" value="{{employee.phone}}" required>
                                    <label for="PhoneInput{{employee.id}}">Телефон</label>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="change-employee" value="Сохранить">
                                </div>
                                </form>
                                <form action="" method="post">
                                    <input style="display: none;" type="input" name="employee_id" value="{{employee.id}}" required>
                                    <input type="submit" class="btn btn-danger" name="delete-employee" value="Удалить">
                                </form>
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% for program in programs %}
            <div class="modal fade change-program-modal" id="ChangeProgramModal{{program.id}}" tabindex="-1" aria-labelledby="ChangeProgramModal{{program.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ChangeProgramModal{{program.id}}Label">Изменить программу</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                                <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Профессия" data-live-search="true" name="profession_id" required>
                                        <option selected value="{{program.profession.id}}">{{program.profession.name}} ({{program.profession.prof_enviroment}})</option>
                                        {% for profession in professions %}
                                            <option value="{{profession.id}}">{{profession.name}} ({{profession.prof_enviroment__name}})</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="ProgramLinkInput{{program.id}}" name="program_link" value="{{program.program_link}}" maxlength="500" placeholder="Ссылка на программу" required>
                                    <label for="ProgramLinkInput{{program.id}}">Ссылка на программу</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="DescriptionInput{{program.id}}" name="description" value="{{program.description}}" maxlength="300" placeholder="Краткое описание задания" required>
                                    <label for="DescriptionInput{{program.id}}">Краткое описание задания</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Автор" data-live-search="true" name="teacher_id" required>
                                        <option selected value="{{program.author.teacher.id}}">{{program.author_name}}</option>
                                        {% for teacher in teachers %}
                                            <option value="{{teacher.id}}">{{teacher.full_name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="EmailInput{{program.id}}" name="email" value="{{program.author.email}}" placeholder="Email" required>
                                    <label for="EmailInput{{program.id}}">Email автора</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="phone" class="form-control" id="PhoneInput{{program.id}}" name="phone" value="{{program.author.phone}}" maxlength="120" placeholder="Телефон" required>
                                    <label for="PhoneInput{{program.id}}">Телефон автора</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Форма обучения" data-live-search="true" name="education_form" required>
                                        <option selected value="{{program.education_form}}">{{program.get_education_form_display}}</option>
                                        <option value="FLLLN">Очная с применением ДОТ</option>
                                        <option value="FLL">Очная</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Возрастные категории" data-live-search="true" name="age_groups" multiple required>
                                        {% for age_group in age_groups %}
                                            <option value="{{age_group.id}}" {% if age_group in program.age_groups.all %}selected{% endif %}>{{age_group.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="ОВЗ" data-live-search="true" name="disability_types" multiple>
                                        {% for disability_type in program.disability_types.all %}
                                            <option selected value="{{disability_type.id}}">{{disability_type.name}}</option>
                                        {% endfor %}
                                        {% for disability_type in disability_types|exclude_disabilities:program.disability_types.all %}
                                            <option value="{{disability_type.id}}">{{disability_type.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="modal-footer">
                                {% if program.status == 'NEW' %}
                                    <div class="d-grid gap-2">
                                        <input style="display: block !important;" type="submit" class="btn btn-primary" name="change-program" value="Сохранить">
                                    </div>
                                </form>
                                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                        <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                                        <input type="submit" class="btn btn-danger" name="delete-program" value="Удалить">
                                    </form>
                                {% else %}
                                    </form>
                                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                        <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                                        <input type="submit" class="btn btn-danger" name="exclude-program" value="Убрать">
                                    </form>
                                {% endif %}
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% for teacher in teachers %}
            <div class="modal fade change-teacher-modal" id="ChangeTeacherModal{{teacher.id}}" tabindex="-1" aria-labelledby="ChangeTeacherModal{{teacher.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ChangeTeacherModal{{teacher.id}}Label">Изменить педагога</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                                <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameTeacherInput{{teacher.id}}" maxlength="30" name="last_name" placeholder="Фамилия" value="{{teacher.last_name}}" required>
                                    <label for="LastNameTeacherInput{{teacher.id}}">Фамилия</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameTeacherInput{{teacher.id}}" maxlength="30" name="first_name" placeholder="Имя" value="{{teacher.first_name}}" required>
                                    <label for="FirstNameTeacherInput{{teacher.id}}">Имя</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameTeacherInput{{teacher.id}}" maxlength="30" name="middle_name" placeholder="Отчество" value="{{teacher.middle_name}}">
                                    <label for="MiddleNameTeacherInput{{teacher.id}}">Отчество</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Тип трудоустройства" data-live-search="true" name="employment_type" required>
                                        <option value="{{teacher.employment_type}}" selected>{{teacher.get_employment_type_display}}</option>
                                        <option value="STFF">Штатный педагогический сотрудник</option>
                                        <option value="TTRC">Привлеченный педагогический работник</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Программы профпроб (реализуемые педагогом)" data-live-search="true" name="programs" multiple>
                                            {% for program in teacher.ticket_programs.all %}
                                                <option value="{{program.id}}" selected>{{program.profession.name}}</option>
                                            {% endfor %}
                                            {% for program in ticket_programs|exclude_programs:teacher.ticket_programs.all %}
                                                <option value="{{program.id}}">{{program.profession__name}}</option>
                                            {% endfor %}
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Уровень образования" data-live-search="true" name="education_level" required>
                                        <option value="{{teacher.education_level}}" selected>{{teacher.get_education_level_display}}</option>
                                        <option value="VO">Высшее образование</option>
                                        <option value="SPO">Cреднее профессиональное образование</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="educationMajorTeacherInput{{teacher.id}}">Укажите специализацию и квалификация</label>
                                    <input type="input" class="form-control" id="educationMajorTeacherInput{{teacher.id}}" maxlength="150" name="education_major" value="{{teacher.education_major}}" placeholder="«Агрономия», квалификация Агроном">
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="positionTeacherInput{{teacher.id}}" name="position" maxlength="150" value="{{teacher.position}}" placeholder="Ученая степень/должность">
                                    <label for="positionTeacherInput{{teacher.id}}">Ученая степень/должность</label>
                                </div>
                                <div class="mb-3">
                                    <label for="ExperienceInput{{teacher.id}}"  class="form-label">Наличие опыта педагогической и/или производственной деятельности</label>
                                    <textarea class="form-control" id="ExperienceInput{{teacher.id}}" name="experience" rows="2">{{teacher.experience}}</textarea>
                                </div>
                                    <div class="mb-3">
                                        <label for="ExperienceInput{{teacher.id}}" class="form-label">Наличие профессиональных сертификаций по компетенции или диплома победителей/призеров конкурсов профмастерства</label>
                                        <textarea class="form-control" id="ExperienceInput{{teacher.id}}" name="bvb_experience" rows="4">{{teacher.bvb_experience}}</textarea>
                                    </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="change-teacher" value="Сохранить">
                                </div>
                                </form>
                                <!--<form action="" method="post">
                                    <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                                    <input type="submit" class="btn btn-danger" name="delete-teacher" value="Удалить">
                                </form>-->
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% for workshop in workshops %}
            <div class="modal fade change-workshop-modal" id="ChangeWorkshopModal{{workshop.id}}" tabindex="-1" aria-labelledby="ChangeWorkshopModal{{workshop.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AChangeWorkshopModal{{workshop.id}}Label">Изменить помещение</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                                <input style="display: none;" type="input" name="workshop_id" value="{{workshop.id}}" required>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="NameWorkshopInput{{workshop.id}}" name="name" maxlength="500" placeholder="Название помещения" value="{{workshop.name}}" required>
                                    <label for="NameWorkshopInput{{workshop.id}}">Название помещения</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Вид занятий" data-live-search="true" name="classes_type" required>
                                        <option value="{{workshop.classes_type}}" selected>{{workshop.get_classes_type_display}}</option>
                                        <option value="T">Теоретические занятия</option>
                                        <option value="P">Практические занятия</option>
                                        <option value="TP">Практические и теоретические занятия</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Программы (реализуемые в аудитории)" data-live-search="true" name="programs" multiple>
                                        {% for program in workshop.ticket_programs.all %}
                                            <option value="{{program.id}}" selected>{{program.profession.name}}</option>
                                        {% endfor %}
                                        {% for program in ticket_programs|exclude_programs:workshop.ticket_programs.all %}
                                            <option value="{{program.id}}">{{program.profession__name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="EquipmentWorkshopInput{{workshop.id}}" class="form-label">Оборудование, программное обеспечение.</label>
                                    <textarea class="form-control" id="EquipmentWorkshopInput{{workshop.id}}" name="equipment" rows="2">{{workshop.equipment}}</textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="change-workshop" value="Сохранить">
                                </div>
                                </form>
                                <form action="" method="post">
                                    <input style="display: none;" type="input" name="workshop_id" value="{{workshop.id}}" required>
                                    <input type="submit" class="btn btn-danger" name="delete-workshop" value="Удалить">
                                </form>
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        {% for employee in employees %}
            <div class="modal fade change-employee-modal" id="ChangeEmployeeModal{{employee.id}}" tabindex="-1" aria-labelledby="ChangeEmployeeModal{{employee.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ChangeEmployeeModal{{employee.id}}Label">Изменить сотрудника</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input style="display: none;" type="input" name="employee_id" value="{{employee.id}}" required>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameInput{{employee.id}}" name="last_name" maxlength="30" placeholder="Фамилия" value="{{employee.last_name}}" required>
                                    <label for="LastNameInput{{employee.id}}">Фамилия</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameInput{{employee.id}}" name="first_name" maxlength="30" placeholder="Имя" value="{{employee.first_name}}" required>
                                    <label for="FirstNameInput{{employee.id}}">Имя</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameInput{{employee.id}}" name="middle_name" maxlength="30" placeholder="Отчество"  value="{{employee.middle_name}}">
                                    <label for="MiddleNameInput{{employee.id}}">Отчество</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="PositionInput{{employee.id}}" name="position" maxlength="150" placeholder="Должность" value="{{employee.position}}" required>
                                    <label for="PositionInput{{employee.id}}">Должность</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="IsHeadInput{{employee.id}}" name="is_head" {% if employee.is_head %} checked {% endif %}>
                                    <label class="form-check-label" for="IsHeadInput{{employee.id}}">Руководитель организации</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameRInput{{employee.id}}" name="last_name_r" maxlength="30" placeholder="Фамииля (родительный падеж)" value="{{employee.last_name_r}}" required>
                                    <label for="LastNameRInput{{employee.id}}">Фамилия (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameRInput{{employee.id}}" name="first_name_r" maxlength="30" placeholder="Имя (родительный падеж)" value="{{employee.first_name_r}}" required>
                                    <label for="FirstNameRInput{{employee.id}}">Имя (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameRInput{{employee.id}}" name="middle_name_r" maxlength="30" placeholder="Отчество (родительный падеж)" value="{{employee.middle_name_r}}">
                                    <label for="MiddleNameRInput{{employee.id}}">Отчество (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="PositionRInput{{employee.id}}" name="position_r" maxlength="150" placeholder="Должность (родительный падеж)" value="{{employee.position_r}}" required>
                                    <label for="PositionRInput{{employee.id}}">Должность (родительный падеж)</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="EmailInput{{employee.id}}" name="email" placeholder="Email" value="{{employee.email}}" required>
                                    <label for="EmailInput{{employee.id}}">Email</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="phone" class="form-control" id="PhoneInput{{employee.id}}" name="phone" maxlength="120" placeholder="Телефон" value="{{employee.phone}}" required>
                                    <label for="PhoneInput{{employee.id}}">Телефон</label>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="change-employee" value="Сохранить">
                                </div>
                                </form>
                                <form action="" method="post">
                                    <input style="display: none;" type="input" name="employee_id" value="{{employee.id}}" required>
                                    <input type="submit" class="btn btn-danger" name="delete-employee" value="Удалить">
                                </form>
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% for program in programs %}
            <div class="modal fade change-program-modal" id="ChangeProgramModal{{program.id}}" tabindex="-1" aria-labelledby="ChangeProgramModal{{program.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ChangeProgramModal{{program.id}}Label">Изменить программу</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Направление программы" data-live-search="true" name="competence_id" required>
                                        <option value="{{program.competence.id}}" selected>{{program.competence.title}}</option>
                                        {% for competence in competencies %}
                                            <option value="{{competence.id}}">{{competence.title}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="ProgramNameInput{{program.id}}" name="program_name" maxlength="500" placeholder="Название" value="{{program.program_name}}" required>
                                    <label for="ProgramNameInput{{program.id}}">Название</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="ProfessionInput{{program.id}}" name="profession" maxlength="200" placeholder="Профессия" value="{{program.profession}}" required>
                                    <label for="ProfessionInput{{program.id}}">Профессия</label>
                                </div>
                                <div class="mb-3">
                                    <label style="display: flex;align-items: center;" for="DescriptionInput{{program.id}}" class="form-label" data-bs-toggle="tooltip" data-bs-html="true" title='ОПИСАНИЕ ЗАПОЛНЯЕТСЯ СТРОГО ПО ШАБЛОНУ! Шаблон описания программы:
        «Программа направлена на формирование компетенций в соответствии с трудовыми функциями (наименование профессии), далее прописать для программам ПО присваиваемый разряд (при наличии) для программ ДПО усваиваемую компетенцию».
        В результате обучения выпускник программы будет способен:
        • указать трудовые функции (компетенции) или 1-5 конкретных умений из программы ПО или ДПО.
        Особенности программы – программа направлена на формирование компетенций, необходимых для профессиональной деятельности в сфере _____________ (указать предполагаемую сферу деятельности по завершению обучения)'>
                                    <p style="margin-top: 1px;margin-bottom: 0px;">Описание </p>
                                    <img style="width: 21px; padding-left: 3px;" src="{% static 'education_centers/img/info-icon.png' %}" alt="info-icon">
                                </label>
                                    <textarea class="form-control" id="DescriptionInput{{program.id}}" name="description" rows="2">{{program.description}}</textarea>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Входные требования" data-live-search="true" name="entry_requirements" required>
                                        <option value="{{program.entry_requirements}}" selected>{{program.get_entry_requirements_display}}</option>
                                        <option value="NDC">Без образования</option>
                                        <option value="SPO">Cреднее профессиональное образование</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Вид программы" data-live-search="true" name="program_type" required>
                                        <option value="{{program.program_type}}" selected>{{program.get_program_type_display}}</option>
                                        <option value="DPOPK">ДПО ПК</option>
                                        <option value="DPOPP">ДПО ПП</option>
                                        <option value="POP">ПО П</option>
                                        <option value="POPP">ПО ПП</option>
                                        <option value="POPK">ПО ПК</option>
                                    </select>
                                </div>
                                <th scope="col"></th>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Форма обучения" data-live-search="true" name="education_form" required>
                                        <option value="{{program.education_form}}" selected>{{program.get_education_form_display}}</option>
                                        <option value="PRTLN">Очно-заочная с применением ДОТ</option>
                                        <option value="FLLLN">Очная с применением ДОТ</option>
                                        <option value="PRT">Очно-заочная</option>
                                        <option value="FLL">Очная</option>
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="number" class="form-control" id="DurationInput{{program.id}}" name="duration" placeholder="Длительность программы" value="{{program.duration}}" required>
                                    <label for="DurationInput{{program.id}}">Длительность программы</label>
                                </div>
                                <div class="mb-3">
                                    <label for="NotesInput{{program.id}}" class="form-label">Примечания</label>
                                    <textarea class="form-control" id="NotesInput{{program.id}}" name="notes" rows="2">{{program.notes}}</textarea>
                                </div>
                            </div>
                            {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or center_project_year.stage == 'FNSHD' or user.is_superuser %}
                                <div class="modal-footer program-change">
                                    <div class="d-grid gap-2">
                                        <input style="display: block !important;" type="submit" class="btn btn-primary" name="change-program" value="Сохранить">
                                    </div>
                                </form>
                                {% if center_project_year.stage != 'FNSHD' or user.is_superuser %}
                                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                        <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                                        <input type="submit" class="btn btn-danger" name="delete-program" value="Удалить">
                                    </form>
                                {% endif %}
                                </div>
                            {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
        {% for teacher in teachers %}
            <div class="modal fade change-teacher-modal" id="ChangeTeacherModal{{teacher.id}}" tabindex="-1" aria-labelledby="ChangeTeacherModal{{teacher.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="ChangeTeacherModal{{teacher.id}}Label">Изменить педагога</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="LastNameTeacherInput{{teacher.id}}" maxlength="30" name="last_name" placeholder="Фамилия" value="{{teacher.last_name}}" required>
                                    <label for="LastNameTeacherInput{{teacher.id}}">Фамилия</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="FirstNameTeacherInput{{teacher.id}}" maxlength="30" name="first_name" placeholder="Имя" value="{{teacher.first_name}}" required>
                                    <label for="FirstNameTeacherInput{{teacher.id}}">Имя</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="MiddleNameTeacherInput{{teacher.id}}" maxlength="30" name="middle_name" placeholder="Отчество" value="{{teacher.middle_name}}">
                                    <label for="MiddleNameTeacherInput{{teacher.id}}">Отчество</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Тип трудоустройства" data-live-search="true" name="employment_type" required>
                                        <option value="{{teacher.employment_type}}" selected>{{teacher.get_employment_type_display}}</option>
                                        <option value="STFF">Штатный педагогический сотрудник</option>
                                        <option value="TTRC">Привлеченный педагогический работник</option>
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Программы профпроб (реализуемые педагогом)" data-live-search="true" name="programs" multiple>
                                            {% for program in teacher.programs.all %}
                                                <option value="{{program.id}}" selected>{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}})</option>
                                            {% endfor %}
                                            {% for program in programs|exclude_programs:teacher.ticket_programs.all %}
                                                <option value="{{program.id}}">{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}})</option>
                                            {% endfor %}
                                    </select>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Уровень образования" data-live-search="true" name="education_level" required>
                                        <option value="{{teacher.education_level}}" selected>{{teacher.get_education_level_display}}</option>
                                        <option value="VO">Высшее образование</option>
                                        <option value="SPO">Cреднее профессиональное образование</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="educationMajorTeacherInput{{teacher.id}}">Укажите специализацию и квалификация</label>
                                    <input type="input" class="form-control" id="educationMajorTeacherInput{{teacher.id}}" maxlength="150" name="education_major" value="{{teacher.education_major}}" placeholder="«Агрономия», квалификация Агроном">
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="positionTeacherInput{{teacher.id}}" name="position" maxlength="150" value="{{teacher.position}}" placeholder="Ученая степень/должность">
                                    <label for="positionTeacherInput{{teacher.id}}">Ученая степень/должность</label>
                                </div>
                                <div class="mb-3">
                                    <label for="ExperienceInput{{teacher.id}}"  class="form-label">Наличие опыта педагогической и/или производственной деятельности</label>
                                    <textarea class="form-control" id="ExperienceInput{{teacher.id}}" name="experience" rows="2">{{teacher.experience}}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="AdditionalEducationInput{{teacher.id}}" class="form-label">Наличие доп. проф. образования по профилю программы за последние 3 года и (или) опыт по профилю программы.</label>
                                    <textarea class="form-control" id="AdditionalEducationInput{{teacher.id}}" name="additional_education" rows="2">{{teacher.additional_education}}</textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="change-teacher" value="Сохранить">
                                </div>
                                </form>
                                <!--<form action="" method="post">
                                    <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                                    <input type="submit" class="btn btn-danger" name="delete-teacher" value="Удалить">
                                </form>-->
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% for workshop in workshops %}
            <div class="modal fade change-workshop-modal" id="ChangeWorkshopModal{{workshop.id}}" tabindex="-1" aria-labelledby="ChangeWorkshopModal{{workshop.id}}Label" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="AChangeWorkshopModal{{workshop.id}}Label">Изменить помещение</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <div class="modal-body">
                                <input style="display: none;" type="input" name="workshop_id" value="{{workshop.id}}" required>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="NameWorkshopInput{{workshop.id}}" name="name" maxlength="500" placeholder="Название помещения" value="{{workshop.name}}" required>
                                    <label for="NameWorkshopInput{{workshop.id}}">Название помещения</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Вид занятий" data-live-search="true" name="classes_type" required>
                                        <option value="{{workshop.classes_type}}" selected>{{workshop.get_classes_type_display}}</option>
                                        <option value="T">Теоретические занятия</option>
                                        <option value="P">Практические занятия</option>
                                        <option value="TP">Практические и теоретические занятия</option>
                                    </select>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="input" class="form-control" id="AddressWorkshopInput{{workshop.id}}" name="address" maxlength="500" placeholder="Адрес" value="{{workshop.address}}" required>
                                    <label for="NameWorkshopInput{{workshop.id}}">Адрес помещения</label>
                                </div>
                                <div class="form mb-3 filter-selectpicker">
                                    <select class="selectpicker w-100" title="Программы профпроб (реализуемые в аудитории)" data-live-search="true" name="programs" multiple>
                                        {%for program in workshop.programs.all %}  
                                            <option value="{{program.id}}" selected>{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}})</option>
                                        {% endfor %}
                                        {% for program in programs|exclude_programs:workshop.programs.all %}
                                            <option value="{{program.id}}">{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}})</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="EquipmentWorkshopInput{{workshop.id}}" class="form-label">Оборудование, программное обеспечение.</label>
                                    <textarea class="form-control" id="EquipmentWorkshopInput{{workshop.id}}" name="equipment" rows="2">{{workshop.equipment}}</textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-grid gap-2">
                                    <input type="submit" class="btn btn-primary" name="change-workshop" value="Сохранить">
                                </div>
                                </form>
                                {% if center_project_year.stage != 'FNSHD' or user.is_superuser %}
                                <form action="" method="post">
                                    <input style="display: none;" type="input" name="workshop_id" value="{{workshop.id}}" required>
                                    <input type="submit" class="btn btn-danger" name="delete-workshop" value="Удалить">
                                </form>
                                {%endif%}
                            </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endif %}
    
    <div class="modal fade add-net-modal" id="AddProgramsNetModal" tabindex="-1" aria-labelledby="AddProgramsNetModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="AddProgramsNetModalLabel">Добавление программ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <div class="modal-body">
                        <div class="alert alert-warning w-90" role="alert">
                            В список программ попадают только программы с минимум 2 преподавателями (преподаватели должны иметь согласия на сотрудничество) и минимум 1 помещением (с указанным адресом)!
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Программы" data-live-search="true" name="qualified_programs" multiple>
                                {%for program in qualified_programs %}  
                                    <option value="{{program.id}}">{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}}ч.)</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div> 
                    <div class="modal-footer">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-primary" name="add-network" value="Сохранить">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade generate-application-modal" id="GenerateApplicationModal" tabindex="-1" aria-labelledby="GenerateApplicationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="GenerateApplicationModalLabel">Генерация заявки</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <div class="modal-body">
                        <div class="alert alert-warning w-90" role="alert">
                            Если вы хотите сгенерировать заявку по всем программам, оставьте поле Программы пустым.
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Программы" data-live-search="true" name="programs" multiple>
                                {%for program in programs.all %}  
                                    <option value="{{program.id}}">{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}}ч.)</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div> 
                    <div class="modal-footer">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-primary" name="generate-application" value="Сохранить">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="page-hdr">
        <h1>Формирование заявки на ПКО<br>(сетевой договор)</h1>
        <div class="project-choice" style="display: none;">
            <a data-project="bilet" style="display: none;" href="{% url 'ed_center_application' ed_center.id %}?p=bilet" class="project-btn btn {%if project == 'bilet' %}btn-primary{%else%}btn-outline-primary{%endif%}">Билет в будущее</a>
            <a data-project="zan"  href="{% url 'ed_center_application' ed_center.id %}?p=zan" class="project-btn btn {%if project != 'bilet' %}btn-primary{%else%}btn-outline-primary{%endif%}">Содействие занятости</a>
        </div>
    </div>
    <div class="steps">
        <h3 class="stage-h3" data-stage="{{center_project_year.stage}}" data-user="{{user.is_superuser}}"> <b>Статус заявки:</b> {{center_project_year.get_stage_display }}</h3>
        <div class="tabs-panel">
            <div class="tabs">
                <a data-step="1" class="step-btn btn {%if stage == 1%}btn-primary{%else%}btn-outline-primary{%endif%}">Организация</a>
                <a data-step="2" class="step-btn btn {%if stage == 2%}btn-primary{%else%}btn-outline-primary{%endif%}">Контакты</a>
                <a data-step="3" class="step-btn btn {%if stage == 3%}btn-primary{%else%}btn-outline-primary{%endif%}">Программы</a>
                <a data-step="4" class="step-btn btn {%if stage == 4%}btn-primary{%else%}btn-outline-primary{%endif%}">Кадры</a>
                <a data-step="5" class="step-btn btn {%if stage == 5%}btn-primary{%else%}btn-outline-primary{%endif%}">МТБ</a>
                <a data-step="6" class="step-btn btn {%if stage == 6%}btn-primary{%else%}btn-outline-primary{%endif%}" {%if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'FLLD' or center_project_year.stage ==  'RWRK' %} style="display: none;"{%endif%}>Договор</a>
                {% if project == 'bilet' %}<a data-step="7" class="step-btn btn {%if stage == 7%}btn-primary{%else%}btn-outline-primary{%endif%}">Квоты</a>{% endif %}
                {% if project == 'bilet' %}
                    {% if center_project_year.stage == 'FRMD' or center_project_year.stage == 'PRVD' or center_project_year.stage == 'DWNLD' or center_project_year.stage == 'FNSHD'%}
                        <a data-step="8" class="step-btn btn {%if stage == 8%}btn-primary{%else%}btn-outline-primary{%endif%}">
                            Документы
                        </a>
                    {% endif %}
                {% endif %}
            </div>
            <div class="generate-form">
                <form action="{% url 'ed_center_application' ed_center.id %}" method="POST">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    {% if user.is_superuser and project == 'bilet' %}
                        <input style="height: 100%;" type="submit" class="btn btn-primary" name="generate-application" value="Сгенерировать заявку">
                    {% else %}
                        {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' %}
                            <input style="height: 100%;" type="submit" class="btn btn-primary" name="send-application" value="Отправить на проверку">
                        {% elif project == 'bilet' and center_project_year.stage != 'FLLNG' and center_project_year.stage != 'RWRK' and center_project_year.stage != 'FLLD' %}
                            <input style="height: 100%;" type="submit" class="btn btn-primary" name="generate-application" value="Сгенерировать заявку">
                        {% endif %}
                    {% endif %}
                </form>
                {% if user.is_superuser or project != 'bilet' and center_project_year.stage != 'FLLNG' and center_project_year.stage != 'RWRK' and center_project_year.stage != 'FLLD' %}
                    <!--<input style="height: 100%;" type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#GenerateApplicationModal" value="Сгенерировать заявку">-->
                {% endif %}
                {% if project != 'bilet' %}
                     <!--<input style="height: 100%;" type="submit" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#GenerateNetAgreementModal" value="Создать сетевой договор">-->
                {% endif %}
            </div>
        </div>
        <div class="organization-step step" data-step="1" {% if stage == 1%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_1_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные организации
                    {% else %}
                        1. Данные организации
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_1_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                        <input style="display: none;" type="input" name="step" value="1" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_1_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    <input style="display: none;" type="input" name="step" value="1" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_1_commentary != "" %}{{center_project_year.step_1_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <form action="{% url 'ed_center_application' ed_center.id %}" method="post" class="collapse show" id="collapseOrgForm">
                {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                <h3>1.1 Об организации</h3>
                    <div class="about">
                        <div class="form-floating ed-name mb-3">
                            <input type="input" class="form-control" id="NameOrgInput" name="name" maxlength="500" value="{{ed_center.name}}" required>
                            <label for="NameOrgInput">Полное наименование</label>
                        </div>
                        <div class="form-floating w-45 mb-3">
                            <input type="input" class="form-control" id="ShortNameOrgInput" name="short_name" maxlength="500"  value="{{ed_center.short_name}}" required>
                            <label for="ShortNameOrgInput">Сокращённое наименование</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="ShortNameROrgInput" name="short_name_r" maxlength="500" value="{{ed_center.short_name_r}}" required>
                            <label for="ShortNameROrgInput">Сокращённое наименование (род. падеж)</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="HomeCityOrgInput" name="home_city" maxlength="150" value="{{ed_center.home_city}}" required>
                            <label for="HomeCityOrgInput">Город (для указания в преамбуле договора)</label>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Род юр. лица для генерации документов" data-live-search="true" name="entity_sex" required>
                                {% if ed_center.entity_sex != None %}
                                    <option selected value="{{ed_center.entity_sex}}">{{ed_center.get_entity_sex_display}}</option>
                                {% endif %}
                                <option value="ML">Мужской</option>
                                <option value="M">Женский</option>
                                <option value="N">Средний</option>
                            </select>
                        </div>
                        {% if project != 'bilet' %}
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="ApplDocsLinkInput" name="appl_docs_link" value="{{center_project_year.appl_docs_link}}">
                                <label for="ApplDocsLinkInput">Полный комплект документов (ссылка на яндекс диск)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="is_federal" name="is_federal" {% if center_project_year.is_federal %} checked {% endif %}>
                                <label class="form-check-label" for="is_federal">
                                    Организация планирует стать федеральным центром обучения
                                </label>
                            </div>
                        {% endif %}
                        {% if project == 'bilet' %}
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="is_ndc" name="is_ndc" {% if center_project_year.is_ndc %} checked {% endif %}>
                                <label style="padding-top: 2px !important" class="form-check-label" for="is_ndc">
                                    Является ли организация плательщиком НДС (при оказании услуг по реализации мероприятий)
                                </label>
                            </div>
                            <div class="alert alert-warning w-90" role="alert">
                                Внимание! Проведение профпроб не является образовательной услугой и не освобождается от НДС на основании статьи 149 НК РФ. Проконсультируйтесь с бухгалтером вашей организации - возможны другие основания для освобождения от НДС.
                            </div>
                            <div class="form-floating w-90 mb-3">
                                <input type="input" class="form-control" id="NoneNdcReasonOrgInput" name="none_ndc_reason" maxlength="500" value="{{center_project_year.none_ndc_reason}}">
                                <label for="NoneNdcReasonOrgInput">Если не является на основании какой статьи Налогового кодекса РФ</label>
                            </div>
                        {% else %}
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="is_ndc" name="is_ndc" {% if ed_center.is_ndc %} checked {% endif %}>
                                <label style="padding-top: 2px !important" class="form-check-label" for="is_ndc">
                                    Является ли организация плательщиком НДС (при реализации образовательных услуг)
                                </label>
                            </div>
                            <div class="form-floating w-90 mb-3">
                                <input type="input" class="form-control" id="NoneNdcReasonOrgInput" name="none_ndc_reason" maxlength="500" value="{{ed_center.none_ndc_reason}}">
                                <label for="NoneNdcReasonOrgInput">Если не является на основании какой статьи Налогового кодекса РФ</label>
                            </div>
                        {% endif %}
                    </div>
                <h3>1.2 Образовательная лицензия</h3>
                    <div class="license-details">
                        <div class="form-floating mb-3 w-90">
                            <input type="input" class="form-control" id="EdLicenseOrgInput" name="ed_license" value="{{ed_center.ed_license}}" required>
                            <label for="EdLicenseOrgInput">Cерия, номер, дата, срок действия</label>
                        </div>
                        <div class="form-floating mb-3 w-90">
                            <input type="input" class="form-control" id="LicenseIssuedByOrgInput" name="license_issued_by" value="{{ed_center.license_issued_by}}" required>
                            <label for="LicenseIssuedByOrgInput">Кем выдана лизенция на осуществление обр. деятельности (в твор. падеже)</label>
                        </div>
                    </div>
                <h3>1.3 Реквизиты</h3>
                <div class="bank-details">
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="InnOrgInput" name="inn" maxlength="25" placeholder="ИНН" value="{{ed_center.bank_details.inn}}" required>
                        <label for="InnOrgInput">ИНН</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="KppOrgInput" name="kpp" maxlength="25" placeholder="КПП" value="{{ed_center.bank_details.kpp}}" required>
                        <label for="KppOrgInput">КПП</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OktmoOrgInput" name="oktmo" maxlength="25" placeholder="ОКТМО" value="{{ed_center.bank_details.oktmo}}" required>
                        <label for="OktmoOrgInput">ОКТМО</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OgrnOrgInput" name="ogrn" maxlength="25" placeholder="ОГРН" value="{{ed_center.bank_details.ogrn}}" required>
                        <label for="OgrnOrgInput">ОГРН</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OkpoOrgInput" name="okpo" maxlength="25" placeholder="ОКПО" value="{{ed_center.bank_details.okpo}}" required>
                        <label for="OkpoOrgInput">ОКПО</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OkvedOrgInput" name="okved" maxlength="250" placeholder="ОКВЭД" value="{{ed_center.bank_details.okved}}" required>
                        <label for="OkvedOrgInput">ОКВЭД</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="BankOrgInput" name="bank" maxlength="250" placeholder="Банк" value="{{ed_center.bank_details.bank}}" required>
                        <label for="BankOrgInput">Банк</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="InnBankOrgInput" name="bank_inn" maxlength="25" placeholder="ИНН банк" value="{{ed_center.bank_details.bank_inn}}" required>
                        <label for="InnBankOrgInput">ИНН банк</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="KppBankOrgInput" name="bank_kpp" maxlength="25" placeholder="КПП банк"  value="{{ed_center.bank_details.bank_kpp}}" required>
                        <label for="KppBankOrgInput">КПП банк</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="BiсOrgInput" name="biс" placeholder="БИК" maxlength="25" value="{{ed_center.bank_details.biс}}" required>
                        <label for="BiсOrgInput">БИК</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="AccountNumberOrgInput" name="account_number" maxlength="25" placeholder="р/с" value="{{ed_center.bank_details.account_number}}" required>
                        <label for="AccountNumberOrgInput">р/с</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="personalAccountNumberOrgInput" name="personal_account_number" maxlength="25" placeholder="Лицевой счёт" value="{{ed_center.bank_details.personal_account_number}}" required>
                        <label for="personalAccountNumberOrgInput">Лицевой счёт</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="CorrAccountOrgInput" name="corr_account" maxlength="25" placeholder="К/сч" value="{{ed_center.bank_details.corr_account}}" required>
                        <label for="CorrAccountOrgInput">К/сч</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="AccountantOrgInput" name="accountant" maxlength="250" placeholder="Главный бухгалтер" value="{{ed_center.bank_details.accountant}}" required>
                        <label for="AccountantOrgInput">Главный бухгалтер</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="PhoneOrgInput" name="phone" placeholder="Телефон(-ы)" maxlength="120" value="{{ed_center.bank_details.phone}}" required>
                        <label for="PhoneOrgInput">Телефон(-ы)</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="EmailOrgInput" name="email" placeholder="Email" value="{{ed_center.bank_details.email}}" required>
                        <label for="EmailOrgInput">Email</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="LegalAddressOrgInput" name="legal_address" maxlength="500" placeholder="Юридический адрес" value="{{ed_center.bank_details.legal_address}}" required>
                        <label for="LegalAddressOrgInput">Юридический адрес</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="MailAddressOrgInput" name="mail_address" maxlength="500" placeholder="Почтовый адрес" value="{{ed_center.bank_details.mail_address}}" required>
                        <label for="MailAddressOrgInput">Почтовый адрес</label>
                    </div>
                </div>
                {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or user.is_superuser %}
                    <div class="submit">
                        <input type="submit" class="btn btn-primary" name="add-org" value="Сохранить">
                    </div>
                {% endif %}
            </form>
        </div>
        <div class="positions-step step" data-step="2" {%if stage == 2%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_2_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Контактные данные
                    {% else %}
                        2. Контактные данные
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_2_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                        <input style="display: none;" type="input" name="step" value="2" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_2_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    <input style="display: none;" type="input" name="step" value="2" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_2_commentary != "" %}{{center_project_year.step_2_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseContactsForm">
                <div class="table-hdr">
                    <h3>2.1 Добавление сотрудников</h3>
                    {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or user.is_superuser %}
                        <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddEmployeeModal">Добавить сотрудника</button>
                    {%endif%}    
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="col">ФИО</th>
                        <th scope="col">Должность</th>
                        <th scope="col">email</th>
                        <th scope="col">Телефон</th>
                    </tr>
                    {% for employee in employees %}
                        <tr>
                            <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeEmployeeModal{{employee.id}}">{{employee.full_name}}</td>
                            <td scope="row">{{employee.position}}</td>
                            <td scope="row">{{employee.email}}</td>
                            <td scope="row">{{employee.phone}}</td>
                        </tr>
                    {% empty %}
                    <tr>
                        <td scope="row" class="none-alert" colspan="4">Не добавлено ни одного сотрудника</td>
                    </tr>
                    {% endfor %}
                </table>
                <h3>2.2. Распределение сотрудников по ролям</h3>
                <div class="positions">
                    {% for position in filled_positions %} 
                        <div class="card position-form">
                            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                                <input style="display: none;" type="number" name="position_id" value={{position.position.id}}>
                                <div class="card-header">{{position.position.position}}</div>
                                    <div class="card-body">
                                            <div class="form mb-3 filter-selectpicker">
                                                <select class="selectpicker w-100" title="Ответственное контактное лицо" data-live-search="true" name="employee_id" required>
                                                    <option selected value="{{position.employee.id}}">{{position.employee.get_name}}</option>
                                                    {% for employee in employees %}
                                                        <option value="{{employee.id}}">{{employee.get_name}} ({{employee.position}})</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            {% if position.position.is_basis_needed %}
                                                <div class="mb-3">
                                                    <input type="input" class="form-control" name="acts_basis" maxlength="500" value="{{position.acts_basis}}" placeholder="Основание" required>
                                                </div>
                                            {% endif %}
                                    </div>
                                    {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or user.is_superuser %}
                                        <div class="card-footer">
                                            <input type="submit" class="btn btn-outline-primary" name="change-position" value="Изменить">
                                        </div>
                                    {% endif %}
                            </form>
                        </div>
                    {% endfor %}
                    {% for position in empty_positions %} 
                        <div class="card position-form">
                            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                                <input style="display: none;" type="number" name="position_id" value={{position.id}}>
                                <div class="card-header">{{position.position}}</div>
                                    <div class="card-body">
                                            <div class="form mb-3 filter-selectpicker">
                                                <select class="selectpicker w-100" title="Ответственное контактное лицо" data-live-search="true" name="employee_id" required>
                                                    {% for employee in employees %}
                                                        <option value="{{employee.id}}">{{employee.get_name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            {% if position.is_basis_needed %}
                                                <div class="mb-3">
                                                    <input type="input" class="form-control" name="acts_basis" maxlength="500" placeholder="Основание" required>
                                                </div>
                                            {% endif %}
                                    </div>
                                    <div class="card-footer">
                                            <input type="submit" class="btn btn-primary" name="add-position" value="Сохранить">
                                    </div>
                            </form>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="programs-step step" data-step="3" {%if stage == 3%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_3_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные о программах, планируемых к реализации
                    {% else %}
                        3. Данные о программах, планируемых к реализации
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_3_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                        <input style="display: none;" type="input" name="step" value="3" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_3_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    <input style="display: none;" type="input" name="step" value="3" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_3_commentary != "" %}{{center_project_year.step_3_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapsePrograms">
                <div class="table-hdr">
                    <h3>Список программ</h3>
                    <div style="display: flex; gap: 15px;">
                        {% if project != 'bilet'%}
                            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                <button class="btn btn-outline-primary" name="export-programs">Скачать список программ в эксель</button>
                            </form>
                            {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or center_project_year.stage == 'FNSHD' or user.is_superuser %}
                                <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddProgramModal">Добавить программу</button>
                            {%endif%}
                        {%else%}
                            {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or user.is_superuser %}
                                <button class="btn btn-outline-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddProgramsModal">Добавить из банка программы</button>
                                <!--<button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddProgramModal">Добавить новую</button>-->
                            {%endif%}
                        {%endif%}
                    </div>
                </div>
                <table class="table">
                    <tr class=""> 
                        {% if project == 'bilet' %}
                            <th scope="col">№</th>
                            <th scope="col">Профессия</th>
                            <th scope="col">Профессиональная среда</th>
                            <th scope="col">Краткое описание задания</th>
                            <th scope="col">Автор программы</th>
                            <th scope="col">Статус</th>
                            <th scope="col">Обеспечение</th>
                            <th scope="col">Ссылка на программу</th>
                            <th scope="col">Возрастные категории</th>
                        {% else %}
                            <th scope="col">№</th>
                            <th scope="col">Название</th>
                            <th scope="col">Направление программы</th>
                            <th scope="col">Профессия</th>
                            <th scope="col">Обеспечение</th>
                            <th scope="col">Форма обучения</th>
                            <th scope="col">Входные требования</th>
                            <th scope="col">Программа</th>
                        {% endif %}
                    </tr>
                    {% for program in programs %}
                        <tr>
                            {% if project == 'bilet'%}
                                <td scope="row">{{ forloop.counter }}</td>
                                <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeProgramModal{{program.id}}">{{program.profession}}</td>
                                <td scope="row">{{program.profession.prof_enviroment}}</td>
                                <td scope="row">{{program.description}}</td>
                                <td scope="row">{{program.author}}</td>
                                <td scope="row">{{program.get_status_display}}</td>
                                <td scope="row">
                                    педагогов: {{program|count_teachers:ed_center}}  <br>
                                    аудиторий: {{program|count_workshops:ed_center}}  
                                </td>
                                <td scope="row">
                                    {% if program.program_link != None and program.program_link != "" %}
                                        <a href="{{program.program_link}}" target="_blank">программа</a>
                                    {%endif%}
                                </td>
                                <td scope="row">
                                    {% for age_group in program.age_groups.all %}
                                        {{ age_group.name }}<br>
                                    {% endfor %}
                                </td>
                            {%else%}
                                <td scope="row">{{ forloop.counter }}</td>
                                <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeProgramModal{{program.id}}">{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}})</td>
                                <td scope="row">{{program.competence}}</td>
                                <td scope="row">{{program.profession}}</td>
                                <td scope="row">
                                    педагогов: {{program.num_teachers}} <br>
                                    аудиторий: {{program.num_workshops}}  
                                </td>
                                <td scope="row">{{program.get_education_form_display}}</td>
                                <td scope="row">{{program.get_entry_requirements_display}}</td>
                                <td>
                                    {% if program.program_file.url != None  %}
                                    <a class="bill-link btn btn-outline-primary" href="{{program.program_file.url}}">Программа</a>
                                    {% else %}
                                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post" enctype="multipart/form-data">
                                                <input style="display: none;" type="text" value={{program.id}} name="program_id">
                                                <div class="mb-3">
                                                    {% csrf_token %}
                                                    {{ form.non_field_errors }}
                                                    {{ form.import_file.help_text }}
                                                    {{ form.import_file.errors }}
                                                    {{ form.import_file }}
                                                </div>
                                                <button style="width: 100%;" class="btn btn-outline-primary" name="import-program">Загрузить</button>
                                        </form> 
                                    {% endif %}
                                </td>
                            {%endif%}
                        </tr>
                    {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="9">Не добавлено ни одной программы</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="teachers-step step" data-step="4" {%if stage == 4%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_4_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные о кадровом обеспечении образовательного процесса
                    {% else %}
                        4. Данные о кадровом обеспечении образовательного процесса
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_4_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                        <input style="display: none;" type="input" name="step" value="4" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_4_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    <input style="display: none;" type="input" name="step" value="4" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_4_commentary != "" %}{{center_project_year.step_4_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseTeachers">
                <div class="table-hdr">
                    <h3>Список педагогов</h3>
                    {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or center_project_year.stage == 'FNSHD' or user.is_superuser %}
                        <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddTeacherModal">Добавить педагога</button>
                    {% endif %}
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="col">№</th>
                        <th scope="col">ФИО</th>
                        <th scope="col">Специальность и квалификация</th>
                        <th scope="col">Ученая степень/должность</th>
                        <th scope="col">Наличие опыта педагогической и/или производственной деятельности</th>
                        {% if project == 'bilet' %}
                            <th scope="col">Профессии</th>
                            <th scope="col">Наличие профессиональных сертификаций по компетенции или диплома победителей/призеров конкурсов профмастерства</th>
                        {%else %}
                        
                        <th scope="col">Согласии на сотрудничество в качестве преподавателя</th>
                        <th scope="col">Шаблон</th>
                        {% endif %}
                    </tr>
                    {% for teacher in teachers %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeTeacherModal{{teacher.id}}">{{teacher.full_name}}</td>
                            <td scope="row">{{teacher.education_major}}</td>
                            <td scope="row">{{teacher.position}}</td>
                            <td scope="row">{{teacher.experience}}</td>
                            {% if project == 'bilet' %}
                                <td scope="col">
                                    {% for programs in teacher.ticket_programs.all %}
                                        {{ programs.profession.name }}<br>
                                    {% endfor %}
                                </td>
                                <td scope="col">{{teacher.bvb_experience}}</td>
                            {% else %}
                                <td scope="col">
                                    {% if teacher.consent_file.url != None  %}
                                        <a class="bill-link btn btn-primary btn-sm" style="width: 100%; margin-bottom: 10px;" href="{{teacher.consent_file.url}}">Скан согласия</a>
                                    {% endif %}
                                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post" enctype="multipart/form-data">
                                        <input style="display: none;" type="text" value={{teacher.id}} name="teacher_id">
                                        <div class="mb-3">
                                            {% csrf_token %}
                                            {{ form.non_field_errors }}
                                            {{ form.import_file.help_text }}
                                            {{ form.import_file.errors }}
                                            {{ form.import_file }}
                                        </div>
                                        <button style="width: 100%;" class="btn btn-outline-primary btn-sm" name="import-consent">Загрузить</button>
                                    </form>
                                </td>
                                <td scope="col">
                                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                        <input style="display: none;" type="input" name="step" value="4" required>
                                        <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                                        <button name='generate_consent'  class="btn btn-outline-primary btn-sm">Скачать</button>
                                    </form>
                                </td>
                            {% endif %}
                        </tr>
                        {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="9">Не добавлено ни одного педагога</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="workshops-step step" data-step="5" {%if stage == 5%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_5_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные о материально-техническом обеспечении
                    {% else %}
                        5. Данные о материально-техническом обеспечении
                    {% endif %}
                </h2>
                
                {% if user.is_superuser and center_project_year.step_5_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                        <input style="display: none;" type="input" name="step" value="5" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_5_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    <input style="display: none;" type="input" name="step" value="5" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_5_commentary != "" %}{{center_project_year.step_5_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseWorkshop">
                <div class="table-hdr">
                    <h3>Список материально-технического обеспечения</h3>
                    {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or center_project_year.stage == 'FNSHD' or user.is_superuser %}
                        <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddWorkshopModal">Добавить помещение</button>
                    {% endif %}
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="row">№</th>
                        <th scope="col">Наименование аудитории</th>
                        <th scope="col">Адрес</th>
                        <th scope="col">Вид занятий</th>
                        {% if project == 'bilet' %}
                            <th scope="col">Профессии</th>
                        {% endif %}
                        <th scope="col">Оборудование, программное обеспечение</th>
                    </tr>
                    {% for workshop in workshops %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeWorkshopModal{{workshop.id}}">{{workshop.name}}</td>
                            <td scope="row">{{workshop.address}}</td>
                            <td scope="row">{{workshop.get_classes_type_display}}</td>
                            {% if project == 'bilet' %}
                                <td scope="col">
                                    {% for programs in workshop.ticket_programs.all %}
                                        {{ programs.profession.name }}<br>
                                    {% endfor %}
                                </td>
                            {% endif %}
                            <td scope="row">{{workshop.equipment}}</td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="9">Не добавлено ни одной мастерской</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="indicators-step step" data-step="6" {%if stage == 6%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_6_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Формирование договора о сетевом сотрудничестве
                    {% else %}
                        6. Формирование договора о сетевом сотрудничестве
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_6_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                        <input style="display: none;" type="input" name="step" value="6" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_6_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    {% if project == 'bilet'%}<input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>{%endif%}
                    <input style="display: none;" type="input" name="step" value="6" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_6_commentary != "" %}{{center_project_year.step_6_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseIndicators">
                
                {% if net_agreement.programs.all.count != 0 %}
                <div class="table-hdr">
                    <h3>Договор</h3>
                </div>
                    {% if net_agreement.agreement_file.url != None  %}
                        <a class="bill-link btn btn-primary btn-sm" href="{{net_agreement.agreement_file.url}}" style="width: 350px; margin-bottom: 10px;">
                            Скачать договор {% if net_agreement.stage == 'PRVD' %}(подписанный){%endif%}
                        </a>
                    {% endif %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post" enctype="multipart/form-data" style="width: 350px;">
                            <div class="mb-3">
                                {% csrf_token %}
                                {{ form.non_field_errors }}
                                {{ form.import_file.help_text }}
                                {{ form.import_file.errors }}
                                {{ form.import_file }}
                            </div>
                            <button style="width: 100%;" class="btn btn-outline-primary" name="import-net">Загрузить</button>
                    </form> 
                
                {% endif %}
                <div class="table-hdr">
                    <h3>Список программ</h3>
                    <div style="display: flex; gap: 10px;">
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <input style="display: none;" type="input" name="step" value="6" required>
                            <button name='generate-net'  class="btn btn-outline-primary">Сформировать договор</button>
                        </form>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#AddProgramsNetModal">Добавить программы</button>
                </div>
                    </div>
                    
                <table class="table">
                    <tr> 
                        <th scope="col">№</th>
                        <th scope="col">Название</th>
                        <th scope="col">Помещения</th>
                        <th scope="col">Преподователи</th>
                        <th scope="col">Программа</th>
                    </tr>
                    {% for program in net_agreement.programs.all %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td scope="row">{{program.program_name}} ({{program.get_program_type_display}}, {{program.duration}})</td>
                            <td scope="row">
                                    {%for workshop in program.workshops.all %}
                                        {% if workshop.address is not None %}
                                            {{workshop.address}}<br>
                                        {% endif %}
                                    {%endfor %}
                            </td>
                            <td scope="row">
                                {% for teacher in program.teachers.all %}
                                    {% if teacher.consent_file is not None %}
                                        {{teacher.get_name}}<br>
                                    {% endif %}
                                {% endfor %}
                            </td>
                            <td scope="row">
                                {% if program.program_file.url != None  %}
                                    <a class="bill-link btn btn-outline-primary" href="{{program.program_file.url}}">Программа</a>
                                {% endif %}
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="5">Не добавлено ни одной программы</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        <div class="quota-step step" data-step="7" {%if stage == 7%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr" style="display: flex;flex-direction: column;">
                {% if project == 'bilet' %}
                    <h2>Квота</h2>
                    
                {% else %}
                    <h2>Квота на июнь</h2>
                    <p>Укажите кол-во граждан, которые соответствуют двум условиям: 
                        <ol>
                            <li>Готовы приступить к обучению в указанный месяц по указанной длительности программ (72, 144, 256)</li>
                            <li>Предварительно по вашим данным подходят под категории ФП "Содействие занятости"</li>
                        </ol>
                    </p>
                {% endif %}
            </div>
            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                {% if project == 'bilet' %}
                    {% for profession in chosen_professions %}
                        <h3 style="padding: 0;margin-bottom: 10px;margin-top: 10px;">{{profession.name}} ({{profession.prof_enviroment__name}})</h3>
                        <table class="table">
                            <tr>
                                <th scope="row">№</th>
                                <th scope="row">Школа</th>
                                <th scope="row">Квота</th>
                            </tr>
                                {% for profession in center_quota|get_profession_quota:profession %}
                                <tr>
                                    <td scope="row">{{ forloop.counter }}</td>
                                    <td scope="row">{{profession.school}}</td>
                                    <td scope="row">{{profession.value}}</td>
                                </tr>
                                {% empty %}
                                <tr><td scope="row" class="none-alert" colspan="3">Не добавлено ни одной квоты</td></tr>
                                {% endfor %}
                            </tr>
                        </table>
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                            <input type="input" style="display: none;" class="form-control" name="profession" value="{{profession.id}}" required>
                            <div class="profession-quota">
                                <div class="form mb-3 selectpicker school">
                                    <select class="selectpicker school-selectpicker" title="Школа" data-live-search="true" name="school_id" required>
                                        {% for school in schools %}
                                            <option value="{{school.id}}">{{school.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="w-45 mb-3">
                                    <input type="number" class="form-control" name="quota" placeholder="квота" required>
                                </div>
                                <button class="btn btn-outline-primary" name="add-school">Добавить школу</button>
                            </div>
                        </form>
                    {% endfor %}
                {% else %}
                    <div class="form-floating ed-name mb-3">
                        <input type="number" class="form-control" id="Quota72" name="quota_72" value="{{center_quota.quota_72}}" required>
                        <label for="Quota72">Квота 72ч</label>
                    </div>
                    <div class="form-floating w-45 mb-3">
                        <input type="number" class="form-control" id="Quota144" name="quota_144" value="{{center_quota.quota_144}}" required>
                        <label for="Quota144">Квота 144ч</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="number" class="form-control" id="Quota256" name="quota_256" value="{{center_quota.quota_256}}" required>
                        <label for="Quota256">Квота 256ч</label>
                    </div>
                    {% if center_project_year.stage == 'FLLNG' or center_project_year.stage == 'RWRK' or user.is_superuser %}
                        <div class="submit">
                            <input type="submit" class="btn btn-primary" name="set-quota" value="Сохранить">
                        </div>
                    {% endif %}
                {% endif %}
            </form>
        </div>
        {% if project == 'bilet' and center_project_year.stage == 'FRMD' or center_project_year.stage == 'PRVD' or center_project_year.stage == 'DWNLD'  or center_project_year.stage == 'FNSHD' %}
            <div class="scan-step step" data-step="8" {%if stage == 8%}style="display:block;"{%else%}style="display:none;"{%endif%}>
                <div class="step-hdr">
                    <h2>
                        {% if center_project_year.step_8_check %}
                            <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Подрузка заявки
                        {% else %}
                            8. Заявка на ПКО{% if center_project_year.stage == 'FNSHD' %}и договор{% endif %}
                        {% endif %}
                    </h2>
                    {% if user.is_superuser and center_project_year.step_8_check == False and center_project_year.stage != 'FNSHD' %}
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                            <input style="display: none;" type="input" name="step" value="8" required>
                            <button class="btn btn-success" name="approve-step">Подтвердить</button>
                        </form>
                    {% endif %}
                </div>
                {% if center_project_year.stage == 'DWNLD' or center_project_year.stage == 'PRVD' or center_project_year.stage == 'FNSHD' %}
                    {% if center_project_year.application_file.url != None %}
                        <a class="btn btn-outline-primary " href="{{center_project_year.application_file.url}}">Скачать скан заявки</a>
                    {% endif %}
                {% endif %}
                {% if center_project_year.stage != 'FNSHD' %}
                    <h3>Загрузить скан заявки</h3>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post" enctype="multipart/form-data">
                        
                        <div class="mb-3">
                            {% csrf_token %}
                            {{ form.non_field_errors }}
                            {{ form.import_file.label_tag }} 
                            {{ form.import_file.help_text }}
                            {{ form.import_file.errors }}
                            {{ form.import_file }}
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="ApplTrackNumber" name="appl_track_number" {% if center_project_year.appl_track_number != None %} value="{{center_project_year.appl_track_number}}"{% endif %} required>
                            <label for="ApplTrackNumber">Трек номер</label>
                        </div>
                        <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                        {% if center_project_year.stage != 'PRVD' or user.is_superuser  %}
                            <div class="submit">
                                <input type="submit" class="btn btn-primary" name="upload-application" value="Сохранить">
                            </div>
                        {% endif %}
                    </form>
                {% else %}
                    <form style="padding-left: 0;" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                        <input name="download-contract" type="submit" class="btn btn-outline-primary" value="Скачать договор">
                    </form>
                    
                    <h3>Загрузить скан договора</h3>
                    <a class="btn btn-outline-primary " href="{{contract.doc_file.url}}">Скачать скан договора</a>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post" enctype="multipart/form-data">
                        <div class="mb-3">
                            {% csrf_token %}
                            {{ form.non_field_errors }}
                            {{ form.import_file.label_tag }} 
                            {{ form.import_file.help_text }}
                            {{ form.import_file.errors }}
                            {{ form.import_file }}
                        </div>
                        <input type="input" style="display: none;" class="form-control" name="bilet" value="bilet" required>
                        {% if contract.doc_stage != 'SGNDAP' or user.is_superuser %}
                            <div class="submit">
                                <input type="submit" class="btn btn-primary" name="upload-contract" value="Загрузить скан договора">
                            </div>
                        {% endif %}
                    </form>
                {% endif %}
            </div>
        {% endif %}
    </div>
    </div>
{% endblock %}