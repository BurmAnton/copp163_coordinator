{% extends "layout.html" %}
{% load static %}
{% load ed_centers_extras %}

{% block title %}Личный кабинет ЦО{% endblock %}
{% block style %}
        <link href="{% static 'education_centers/css/ed_center_application.css' %}" rel="stylesheet">
{% endblock %}
{% block script %}
    <script src="{% static 'education_centers/js/ed_center_application.js' %}" rel="stylesheet"></script>
{% endblock %}

{% block body %}
    <div class="modal fade add-employee-modal" id="AddEmployeeModal" tabindex="-1" aria-labelledby="AddEmployeeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="AddEmployeeModalLabel">Добавить сотрудника</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="LastNameInput" name="last_name" maxlength="30" placeholder="Фамилия" required>
                            <label for="LastNameInput">Фамилия</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="FirstNameInput" name="first_name" maxlength="30" placeholder="Имя" required>
                            <label for="FirstNameInput">Имя</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="MiddleNameInput" name="middle_name" maxlength="30" placeholder="Отчество">
                            <label for="MiddleNameInput">Отчество</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="PositionInput" name="position" maxlength="150" placeholder="Должность" required>
                            <label for="PositionInput">Должность</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="IsHeadCheckbox" name="is_head">
                            <label class="form-check-label" for="IsHeadCheckbox">
                              Руководитель организации
                            </label>
                          </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="LastNameRInput" name="last_name_r" maxlength="30" placeholder="Фамииля (родительный падеж)" required>
                            <label for="LastNameRInput">Фамилия (родительный падеж)</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="FirstNameRInput" name="first_name_r" maxlength="30" placeholder="Имя (родительный падеж)" required>
                            <label for="FirstNameRInput">Имя (родительный падеж)</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="MiddleNameRInput" name="middle_name_r" maxlength="30" placeholder="Отчество (родительный падеж)">
                            <label for="MiddleNameRInput">Отчество (родительный падеж)</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="PositionRInput" name="position_r" maxlength="150" placeholder="Должность (родительный падеж)" required>
                            <label for="PositionRInput">Должность (родительный падеж)</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="EmailInput" name="email" placeholder="Email" required>
                            <label for="EmailInput">Email</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="phone" class="form-control" id="PhoneInput" name="phone" maxlength="120" placeholder="Телефон" required>
                            <label for="PhoneInput">Телефон</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-primary" name="add-employee" value="Сохранить">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade add-program-modal" id="AddProgramModal" tabindex="-1" aria-labelledby="AddProgramModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="AddProgramLabel">Добавить программу</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <div class="modal-body">
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Направление программы" data-live-search="true" name="competence_id" required>
                                {% for competence in competencies %}
                                    <option value="{{competence.id}}">{{competence.title}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="ProgramNameInput" name="program_name" maxlength="500" placeholder="Название" required>
                            <label for="ProgramNameInput">Название</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="ProfessionNameInput" name="profession" maxlength="200" placeholder="Профессия" required>
                            <label for="ProfessionNameInput">Профессия</label>
                        </div>
                        <div class="mb-3">
                            <label style="display: flex;align-items: center;" for="DescriptionInput" class="form-label" data-bs-toggle="tooltip" data-bs-html="true" title='ОПИСАНИЕ ЗАПОЛНЯЕТСЯ СТРОГО ПО ШАБЛОНУ! Шаблон описания программы:
«Программа направлена на формирование компетенций в соответствии с трудовыми функциями (наименование профессии), далее прописать для программам ПО присваиваемый разряд (при наличии) для программ ДПО усваиваемую компетенцию».
В результате обучения выпускник программы будет способен:
    • указать трудовые функции (компетенции) или 1-5 конкретных умений из программы ПО или ДПО.
Особенности программы – программа направлена на формирование компетенций, необходимых для профессиональной деятельности в сфере _____________ (указать предполагаемую сферу деятельности по завершению обучения)'>
                                <p style="margin-top: 1px;margin-bottom: 0px;">Описание </p>
                                <img style="width: 21px; padding-left: 3px;" src="{% static 'education_centers/img/info-icon.png' %}" alt="info-icon">
                            </label>
                            <textarea class="form-control" id="DescriptionInput" name="description" rows="2">{{program.description}}</textarea>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Входные требования" data-live-search="true" name="entry_requirements" required>
                                <option value="NDC">Без образования</option>
                                <option value="SPO">Cреднее профессиональное образование</option>
                            </select>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Вид программы" data-live-search="true" name="program_type" required>
                                <option value="DPOPK">ДПО ПК</option>
                                <option value="DPOPP">ДПО ПП</option>
                                <option value="POP">ПО П</option>
                                <option value="POPP">ПО ПП</option>
                                <option value="POPK">ПО ПК</option>
                            </select>
                        </div>
                        <th scope="col"></th>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Форма обучения" data-live-search="true" name="education_form" required>
                                <option value="PRTLN">Очно-заочная с применением ДОТ</option>
                                <option value="FLLLN">Очная с применением ДОТ</option>
                                <option value="PRT">Очно-заочная</option>
                                <option value="FLL">Очная</option>
                            </select>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control" id="DurationInput" name="duration" placeholder="Длительность программы" required>
                            <label for="DurationInput">Длительность программы</label>
                        </div>
                        <div class="mb-3">
                            <label for="NotesInput" class="form-label">Примечания</p></label>
                            <textarea class="form-control" id="NotesInput" name="notes" rows="2"></textarea>
                          </div>
                    </div>
                    <div class="modal-footer">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-primary" name="add-program" value="Сохранить">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade add-teacher-modal" id="AddTeacherModal" tabindex="-1" aria-labelledby="AddTeacherModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="AddTeacherLabel">Добавить педагога</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="LastNameTeacherInput" maxlength="30" name="last_name" placeholder="Фамилия" required>
                            <label for="LastNameTeacherInput">Фамилия</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="FirstNameTeacherInput" maxlength="30" name="first_name" placeholder="Имя" required>
                            <label for="FirstNameTeacherInput">Имя</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="MiddleNameTeacherInput" maxlength="30" name="middle_name" placeholder="Отчество">
                            <label for="MiddleNameTeacherInput">Отчество</label>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Тип трудоустройства" data-live-search="true" name="employment_type" required>
                                <option value="STFF">Штатный педагогический сотрудник</option>
                                <option value="TTRC">Привлеченный педагогический работник</option>
                            </select>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Программы обучения (реализуемые педагогом)" data-live-search="true" name="programs" multiple required>
                                {% for program in ed_center.programs.all %}
                                <option value="{{program.id}}">{{program.program_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Уровень образования" data-live-search="true" name="education_level" required>
                                <option value="VO">Высшее образование</option>
                                <option value="SPO">Cреднее профессиональное образование</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="educationMajorTeacherInput">Укажите специализацию и квалификация</label>
                            <input type="input" class="form-control" id="educationMajorTeacherInput" name="education_major" maxlength="150" placeholder="«Агрономия», квалификация Агроном">
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="positionTeacherInput" name="position" maxlength="150" placeholder="Ученая степень/должность">
                            <label for="positionTeacherInput">Ученая степень/должность</label>
                        </div>
                        <div class="mb-3">
                            <label for="ExperienceInput" class="form-label">Наличие опыта педагогической и/или производственной деятельности</label>
                            <textarea class="form-control" id="ExperienceInput" name="experience" rows="2"></textarea>
                          </div>
                          <div class="mb-3">
                            <label for="AdditionalEducationInput" class="form-label">Наличие доп. проф. образования по профилю программы за последние 3 года и (или) опыт по профилю программы.</label>
                            <textarea class="form-control" id="AdditionalEducationInput" name="additional_education" rows="2"></textarea>
                          </div>
                    </div>
                    <div class="modal-footer">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-primary" name="add-teacher" value="Сохранить">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade add-workshop-modal" id="AddWorkshopModal" tabindex="-1" aria-labelledby="AddWorkshopModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="AddWorkshopLabel">Добавить помещение</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="NameWorkshopInput" name="name" maxlength="500" placeholder="Название помещения" required>
                            <label for="NameWorkshopInput">Название помещения</label>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Вид занятий" data-live-search="true" name="classes_type" required>
                                <option value="T">Теоретические занятия</option>
                                <option value="P">Практические занятия</option>
                                <option value="TP">Практические и теоретические занятия</option>
                            </select>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Программы обучения (реализуемые в аудитории)" data-live-search="true" name="programs" multiple required>
                                {% for program in ed_center.programs.all %}
                                <option value="{{program.id}}">{{program.program_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="EquipmentWorkshopInput" class="form-label">Оборудование, программное обеспечение.</label>
                            <textarea class="form-control" id="EquipmentWorkshopInput" name="equipment" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-primary" name="add-workshop" value="Сохранить">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% for employee in employees %}
        <div class="modal fade change-employee-modal" id="ChangeEmployeeModal{{employee.id}}" tabindex="-1" aria-labelledby="ChangeEmployeeModal{{employee.id}}Label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="ChangeEmployeeModal{{employee.id}}Label">Изменить сотрудника</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <div class="modal-body">
                            <input style="display: none;" type="input" name="employee_id" value="{{employee.id}}" required>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="LastNameInput{{employee.id}}" name="last_name" maxlength="30" placeholder="Фамилия" value="{{employee.last_name}}" required>
                                <label for="LastNameInput{{employee.id}}">Фамилия</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="FirstNameInput{{employee.id}}" name="first_name" maxlength="30" placeholder="Имя" value="{{employee.first_name}}" required>
                                <label for="FirstNameInput{{employee.id}}">Имя</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="MiddleNameInput{{employee.id}}" name="middle_name" maxlength="30" placeholder="Отчество"  value="{{employee.middle_name}}">
                                <label for="MiddleNameInput{{employee.id}}">Отчество</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="PositionInput{{employee.id}}" name="position" maxlength="150" placeholder="Должность" value="{{employee.position}}" required>
                                <label for="PositionInput{{employee.id}}">Должность</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="IsHeadInput{{employee.id}}" name="is_head" {% if employee.is_head %} checked {% endif %}>
                                <label class="form-check-label" for="IsHeadInput{{employee.id}}">Руководитель организации</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="LastNameRInput{{employee.id}}" name="last_name_r" maxlength="30" placeholder="Фамииля (родительный падеж)" value="{{employee.last_name_r}}" required>
                                <label for="LastNameRInput{{employee.id}}">Фамилия (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="FirstNameRInput{{employee.id}}" name="first_name_r" maxlength="30" placeholder="Имя (родительный падеж)" value="{{employee.first_name_r}}" required>
                                <label for="FirstNameRInput{{employee.id}}">Имя (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="MiddleNameRInput{{employee.id}}" name="middle_name_r" maxlength="30" placeholder="Отчество (родительный падеж)" value="{{employee.middle_name_r}}">
                                <label for="MiddleNameRInput{{employee.id}}">Отчество (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="PositionRInput{{employee.id}}" name="position_r" maxlength="150" placeholder="Должность (родительный падеж)" value="{{employee.position_r}}" required>
                                <label for="PositionRInput{{employee.id}}">Должность (родительный падеж)</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="EmailInput{{employee.id}}" name="email" placeholder="Email" value="{{employee.email}}" required>
                                <label for="EmailInput{{employee.id}}">Email</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="phone" class="form-control" id="PhoneInput{{employee.id}}" name="phone" maxlength="120" placeholder="Телефон" value="{{employee.phone}}" required>
                                <label for="PhoneInput{{employee.id}}">Телефон</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="d-grid gap-2">
                                <input type="submit" class="btn btn-primary" name="change-employee" value="Сохранить">
                            </div>
                            </form>
                            <form action="" method="post">
                                <input style="display: none;" type="input" name="employee_id" value="{{employee.id}}" required>
                                <input type="submit" class="btn btn-danger" name="delete-employee" value="Удалить">
                            </form>
                        </div>
                </div>
            </div>
        </div>
    {% endfor %}
    {% for program in programs %}
        <div class="modal fade change-program-modal" id="ChangeProgramModal{{program.id}}" tabindex="-1" aria-labelledby="ChangeProgramModal{{program.id}}Label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="ChangeProgramModal{{program.id}}Label">Изменить программу</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <div class="modal-body">
                            <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Направление программы" data-live-search="true" name="competence_id" required>
                                    <option value="{{program.competence.id}}" selected>{{program.competence.title}}</option>
                                    {% for competence in competencies %}
                                        <option value="{{competence.id}}">{{competence.title}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="ProgramNameInput{{program.id}}" name="program_name" maxlength="500" placeholder="Название" value="{{program.program_name}}" required>
                                <label for="ProgramNameInput{{program.id}}">Название</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="ProfessionInput{{program.id}}" name="profession" maxlength="200" placeholder="Профессия" value="{{program.profession}}" required>
                                <label for="ProfessionInput{{program.id}}">Профессия</label>
                            </div>
                            <div class="mb-3">
                                <label style="display: flex;align-items: center;" for="DescriptionInput{{program.id}}" class="form-label" data-bs-toggle="tooltip" data-bs-html="true" title='ОПИСАНИЕ ЗАПОЛНЯЕТСЯ СТРОГО ПО ШАБЛОНУ! Шаблон описания программы:
«Программа направлена на формирование компетенций в соответствии с трудовыми функциями (наименование профессии), далее прописать для программам ПО присваиваемый разряд (при наличии) для программ ДПО усваиваемую компетенцию».
В результате обучения выпускник программы будет способен:
    • указать трудовые функции (компетенции) или 1-5 конкретных умений из программы ПО или ДПО.
Особенности программы – программа направлена на формирование компетенций, необходимых для профессиональной деятельности в сфере _____________ (указать предполагаемую сферу деятельности по завершению обучения)'>
                                <p style="margin-top: 1px;margin-bottom: 0px;">Описание </p>
                                <img style="width: 21px; padding-left: 3px;" src="{% static 'education_centers/img/info-icon.png' %}" alt="info-icon">
                            </label>
                                <textarea class="form-control" id="DescriptionInput{{program.id}}" name="description" rows="2">{{program.description}}</textarea>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Входные требования" data-live-search="true" name="entry_requirements" required>
                                    <option value="{{program.entry_requirements}}" selected>{{program.get_entry_requirements_display}}</option>
                                    <option value="NDC">Без образования</option>
                                    <option value="SPO">Cреднее профессиональное образование</option>
                                </select>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Вид программы" data-live-search="true" name="program_type" required>
                                    <option value="{{program.program_type}}" selected>{{program.get_program_type_display}}</option>
                                    <option value="DPOPK">ДПО ПК</option>
                                    <option value="DPOPP">ДПО ПП</option>
                                    <option value="POP">ПО П</option>
                                    <option value="POPP">ПО ПП</option>
                                    <option value="POPK">ПО ПК</option>
                                </select>
                            </div>
                            <th scope="col"></th>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Форма обучения" data-live-search="true" name="education_form" required>
                                    <option value="{{program.education_form}}" selected>{{program.get_education_form_display}}</option>
                                    <option value="PRTLN">Очно-заочная с применением ДОТ</option>
                                    <option value="FLLLN">Очная с применением ДОТ</option>
                                    <option value="PRT">Очно-заочная</option>
                                    <option value="FLL">Очная</option>
                                </select>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="number" class="form-control" id="DurationInput{{program.id}}" name="duration" placeholder="Длительность программы" value="{{program.duration}}" required>
                                <label for="DurationInput{{program.id}}">Длительность программы</label>
                            </div>
                            <div class="mb-3">
                                <label for="NotesInput{{program.id}}" class="form-label">Примечания</label>
                                <textarea class="form-control" id="NotesInput{{program.id}}" name="notes" rows="2">{{program.notes}}</textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="d-grid gap-2">
                                <input type="submit" class="btn btn-primary" name="change-program" value="Сохранить">
                            </div>
                            </form>
                            <form action="" method="post">
                                <input style="display: none;" type="input" name="program_id" value="{{program.id}}" required>
                                <input type="submit" class="btn btn-danger" name="delete-program" value="Удалить">
                            </form>
                        </div>
                </div>
            </div>
        </div>
    {% endfor %}
    {% for teacher in teachers %}
        <div class="modal fade change-teacher-modal" id="ChangeTeacherModal{{teacher.id}}" tabindex="-1" aria-labelledby="ChangeTeacherModal{{teacher.id}}Label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="ChangeTeacherModal{{teacher.id}}Label">Изменить педагога</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <div class="modal-body">
                            <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="LastNameTeacherInput{{teacher.id}}" maxlength="30" name="last_name" placeholder="Фамилия" value="{{teacher.last_name}}" required>
                                <label for="LastNameTeacherInput{{teacher.id}}">Фамилия</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="FirstNameTeacherInput{{teacher.id}}" maxlength="30" name="first_name" placeholder="Имя" value="{{teacher.first_name}}" required>
                                <label for="FirstNameTeacherInput{{teacher.id}}">Имя</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="MiddleNameTeacherInput{{teacher.id}}" maxlength="30" name="middle_name" placeholder="Отчество" value="{{teacher.middle_name}}">
                                <label for="MiddleNameTeacherInput{{teacher.id}}">Отчество</label>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Тип трудоустройства" data-live-search="true" name="employment_type" required>
                                    <option value="{{teacher.employment_type}}" selected>{{teacher.get_employment_type_display}}</option>
                                    <option value="STFF">Штатный педагогический сотрудник</option>
                                    <option value="TTRC">Привлеченный педагогический работник</option>
                                </select>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Программы обучения (реализуемые педагогом)" data-live-search="true" name="programs" multiple required>
                                    {% for program in teacher.programs.all %}
                                        <option value="{{program.id}}" selected>{{program.program_name}}</option>
                                    {% endfor %}
                                    {% for program in programs|exclude_programs:teacher.programs.all %}
                                        <option value="{{program.id}}">{{program.program_name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Уровень образования" data-live-search="true" name="education_level" required>
                                    <option value="{{teacher.education_level}}" selected>{{teacher.get_education_level_display}}</option>
                                    <option value="VO">Высшее образование</option>
                                    <option value="SPO">Cреднее профессиональное образование</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="educationMajorTeacherInput{{teacher.id}}">Укажите специализацию и квалификация</label>
                                <input type="input" class="form-control" id="educationMajorTeacherInput{{teacher.id}}" maxlength="150" name="education_major" value="{{teacher.education_major}}" placeholder="«Агрономия», квалификация Агроном">
                            </div>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="positionTeacherInput{{teacher.id}}" name="position" maxlength="150" value="{{teacher.position}}" placeholder="Ученая степень/должность">
                                <label for="positionTeacherInput{{teacher.id}}">Ученая степень/должность</label>
                            </div>
                            <div class="mb-3">
                                <label for="ExperienceInput{{teacher.id}}"  class="form-label">Наличие опыта педагогической и/или производственной деятельности</label>
                                <textarea class="form-control" id="ExperienceInput{{teacher.id}}" name="experience" rows="2">{{teacher.experience}}</textarea>
                            </div>
                            <div class="mb-3">
                                <label for="AdditionalEducationInput{{teacher.id}}" class="form-label">Наличие доп. проф. образования по профилю программы за последние 3 года и (или) опыт по профилю программы.</label>
                                <textarea class="form-control" id="AdditionalEducationInput{{teacher.id}}" name="additional_education" rows="2">{{teacher.additional_education}}</textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="d-grid gap-2">
                                <input type="submit" class="btn btn-primary" name="change-teacher" value="Сохранить">
                            </div>
                            </form>
                            <form action="" method="post">
                                <input style="display: none;" type="input" name="teacher_id" value="{{teacher.id}}" required>
                                <input type="submit" class="btn btn-danger" name="delete-teacher" value="Удалить">
                            </form>
                        </div>
                    
                </div>
            </div>
        </div>
    {% endfor %}
    {% for workshop in workshops %}
        <div class="modal fade change-workshop-modal" id="ChangeWorkshopModal{{workshop.id}}" tabindex="-1" aria-labelledby="ChangeWorkshopModal{{workshop.id}}Label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="AChangeWorkshopModal{{workshop.id}}Label">Изменить помещение</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <div class="modal-body">
                            <input style="display: none;" type="input" name="workshop_id" value="{{workshop.id}}" required>
                            <div class="form-floating mb-3">
                                <input type="input" class="form-control" id="NameWorkshopInput{{workshop.id}}" name="name" maxlength="500" placeholder="Название помещения" value="{{workshop.name}}" required>
                                <label for="NameWorkshopInput{{workshop.id}}">Название помещения</label>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Вид занятий" data-live-search="true" name="classes_type" required>
                                    <option value="{{workshop.classes_type}}" selected>{{workshop.get_classes_type_display}}</option>
                                    <option value="T">Теоретические занятия</option>
                                    <option value="P">Практические занятия</option>
                                    <option value="TP">Практические и теоретические занятия</option>
                                </select>
                            </div>
                            <div class="form mb-3 filter-selectpicker">
                                <select class="selectpicker w-100" title="Программы обучения (реализуемые в аудитории)" data-live-search="true" name="programs" multiple required>
                                    {%for program in workshop.programs.all %}  
                                        <option value="{{program.id}}" selected>{{program.program_name}}</option>
                                    {% endfor %}
                                    {% for program in programs|exclude_programs:workshop.programs.all %}
                                        <option value="{{program.id}}">{{program.program_name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="EquipmentWorkshopInput{{workshop.id}}" class="form-label">Оборудование, программное обеспечение.</label>
                                <textarea class="form-control" id="EquipmentWorkshopInput{{workshop.id}}" name="equipment" rows="2">{{workshop.equipment}}</textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="d-grid gap-2">
                                <input type="submit" class="btn btn-primary" name="change-workshop" value="Сохранить">
                            </div>
                            </form>
                            <form action="" method="post">
                                <input style="display: none;" type="input" name="workshop_id" value="{{workshop.id}}" required>
                                <input type="submit" class="btn btn-danger" name="delete-workshop" value="Удалить">
                            </form>
                        </div>
                    
                </div>
            </div>
        </div>
    {% endfor %}
    <div class="page-hdr"><h1>Формирование заявки на ПКО</h1></div>
    <div class="steps">
        <h3> <b>Статус заявки:</b> {{center_project_year.get_stage_display }}</h3>
        <div class="tabs-panel">
            <div class="tabs">
                <a data-step="1" class="step-btn btn {%if stage == 1%}btn-primary{%else%}btn-outline-primary{%endif%}">Организация</a>
                <a data-step="2" class="step-btn btn {%if stage == 2%}btn-primary{%else%}btn-outline-primary{%endif%}">Контакты</a>
                <a data-step="3" class="step-btn btn {%if stage == 3%}btn-primary{%else%}btn-outline-primary{%endif%}">Программы</a>
                <a data-step="4" class="step-btn btn {%if stage == 4%}btn-primary{%else%}btn-outline-primary{%endif%}">Кадры</a>
                <a data-step="5" class="step-btn btn {%if stage == 5%}btn-primary{%else%}btn-outline-primary{%endif%}">МТБ</a>
                <a data-step="6" class="step-btn btn {%if stage == 6%}btn-primary{%else%}btn-outline-primary{%endif%}">Показатели</a>
                <a data-step="7" class="step-btn btn {%if stage == 7%}btn-primary{%else%}btn-outline-primary{%endif%}">Квоты</a>
            </div>
            {% if user.is_superuser or center_project_year.get_stage_display == 'заявка проверена' %}
                <div class="generate-form">
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="POST">
                        <input style="height: 100%;" type="submit" class="btn btn-primary" name="generate-application" value="Сгенерировать заявку">
                    </form>
                </div>
            {% endif %}
        </div>
        <div class="organization-step step" data-step="1" {% if stage == 1%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_1_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные организации
                    {% else %}
                        1. Данные организации
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_1_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input style="display: none;" type="input" name="step" value="1" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_1_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <input style="display: none;" type="input" name="step" value="1" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_1_commentary != "" %}{{center_project_year.step_1_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <form action="{% url 'ed_center_application' ed_center.id %}" method="post" class="collapse show" id="collapseOrgForm">
                <h3>1.1 Об организации</h3>
                    <div class="about">
                        <div class="form-floating ed-name mb-3">
                            <input type="input" class="form-control" id="NameOrgInput" name="name" maxlength="500" value="{{ed_center.name}}" required>
                            <label for="NameOrgInput">Полное наименование</label>
                        </div>
                        <div class="form-floating w-45 mb-3">
                            <input type="input" class="form-control" id="ShortNameOrgInput" name="short_name" maxlength="500"  value="{{ed_center.short_name}}" required>
                            <label for="ShortNameOrgInput">Сокращённое наименование</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="ShortNameROrgInput" name="short_name_r" maxlength="500" value="{{ed_center.short_name_r}}" required>
                            <label for="ShortNameROrgInput">Сокращённое наименование (род. падеж)</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="HomeCityOrgInput" name="home_city" maxlength="150" value="{{ed_center.home_city}}" required>
                            <label for="HomeCityOrgInput">Город (для указания в преамбуле договора)</label>
                        </div>
                        <div class="form mb-3 filter-selectpicker">
                            <select class="selectpicker w-100" title="Род юр. лица для генерации документов" data-live-search="true" name="entity_sex" required>
                                {% if ed_center.entity_sex != None %}
                                    <option selected value="{{ed_center.entity_sex}}">{{ed_center.get_entity_sex_display}}</option>
                                {% endif %}
                                <option value="M">Женский</option>
                                <option value="N">Средний</option>
                            </select>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="input" class="form-control" id="ApplDocsLinkInput" name="appl_docs_link" value="{{center_project_year.appl_docs_link}}" required>
                            <label for="ApplDocsLinkInput">Полный комплект документов (ссылка на яндекс диск)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="is_federal" name="is_federal" {% if center_project_year.is_federal %} checked {% endif %}>
                            <label class="form-check-label" for="is_federal">
                                Организация планирует стать федеральным центром обучения
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="is_ndc" name="is_ndc" {% if ed_center.is_ndc %} checked {% endif %}>
                            <label class="form-check-label" for="is_ndc">
                                Является ли организация плательщиком НДС (при реализации образовательных услуг)
                            </label>
                        </div>
                        <div class="form-floating w-90 mb-3">
                            <input type="input" class="form-control" id="NoneNdcReasonOrgInput" name="none_ndc_reason" maxlength="500" value="{{ed_center.none_ndc_reason}}">
                            <label for="NoneNdcReasonOrgInput">Если не является на основании какой статьи Налогового кодекса РФ</label>
                        </div>
                    </div>
                <h3>1.2 Образовательная лицензия</h3>
                    <div class="license-details">
                        <div class="form-floating mb-3 w-90">
                            <input type="input" class="form-control" id="EdLicenseOrgInput" name="ed_license" value="{{ed_center.ed_license}}" required>
                            <label for="EdLicenseOrgInput">Cерия, номер, дата, срок действия</label>
                        </div>
                        <div class="form-floating mb-3 w-90">
                            <input type="input" class="form-control" id="LicenseIssuedByOrgInput" name="license_issued_by" value="{{ed_center.license_issued_by}}" required>
                            <label for="LicenseIssuedByOrgInput">Кем выдана лизенция на осуществление обр. деятельности (в твор. падеже)</label>
                        </div>
                    </div>
                <h3>1.3 Реквизиты</h3>
                <div class="bank-details">
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="InnOrgInput" name="inn" maxlength="25" placeholder="ИНН" value="{{ed_center.bank_details.inn}}" required>
                        <label for="InnOrgInput">ИНН</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="KppOrgInput" name="kpp" maxlength="25" placeholder="КПП" value="{{ed_center.bank_details.kpp}}" required>
                        <label for="KppOrgInput">КПП</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OktmoOrgInput" name="oktmo" maxlength="25" placeholder="ОКТМО" value="{{ed_center.bank_details.oktmo}}" required>
                        <label for="OktmoOrgInput">ОКТМО</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OgrnOrgInput" name="ogrn" maxlength="25" placeholder="ОГРН" value="{{ed_center.bank_details.ogrn}}" required>
                        <label for="OgrnOrgInput">ОГРН</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OkpoOrgInput" name="okpo" maxlength="25" placeholder="ОКПО" value="{{ed_center.bank_details.okpo}}" required>
                        <label for="OkpoOrgInput">ОКПО</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="OkvedOrgInput" name="okved" maxlength="250" placeholder="ОКВЭД" value="{{ed_center.bank_details.okved}}" required>
                        <label for="OkvedOrgInput">ОКВЭД</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="BankOrgInput" name="bank" maxlength="250" placeholder="Банк" value="{{ed_center.bank_details.bank}}" required>
                        <label for="BankOrgInput">Банк</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="InnBankOrgInput" name="bank_inn" maxlength="25" placeholder="ИНН банк" value="{{ed_center.bank_details.bank_inn}}" required>
                        <label for="InnBankOrgInput">ИНН банк</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="KppBankOrgInput" name="bank_kpp" maxlength="25" placeholder="КПП банк"  value="{{ed_center.bank_details.bank_kpp}}" required>
                        <label for="KppBankOrgInput">КПП банк</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="BiсOrgInput" name="biс" placeholder="БИК" maxlength="25" value="{{ed_center.bank_details.biс}}" required>
                        <label for="BiсOrgInput">БИК</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="AccountNumberOrgInput" name="account_number" maxlength="25" placeholder="р/с" value="{{ed_center.bank_details.account_number}}" required>
                        <label for="AccountNumberOrgInput">р/с</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="personalAccountNumberOrgInput" name="personal_account_number" maxlength="25" placeholder="Лицевой счёт" value="{{ed_center.bank_details.personal_account_number}}" required>
                        <label for="personalAccountNumberOrgInput">Лицевой счёт</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="CorrAccountOrgInput" name="corr_account" maxlength="25" placeholder="К/сч" value="{{ed_center.bank_details.corr_account}}" required>
                        <label for="CorrAccountOrgInput">К/сч</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="AccountantOrgInput" name="accountant" maxlength="250" placeholder="Главный бухгалтер" value="{{ed_center.bank_details.accountant}}" required>
                        <label for="AccountantOrgInput">Главный бухгалтер</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="PhoneOrgInput" name="phone" placeholder="Телефон(-ы)" maxlength="120" value="{{ed_center.bank_details.phone}}" required>
                        <label for="PhoneOrgInput">Телефон(-ы)</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="EmailOrgInput" name="email" placeholder="Email" value="{{ed_center.bank_details.email}}" required>
                        <label for="EmailOrgInput">Email</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="LegalAddressOrgInput" name="legal_address" maxlength="500" placeholder="Юридический адрес" value="{{ed_center.bank_details.legal_address}}" required>
                        <label for="LegalAddressOrgInput">Юридический адрес</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="input" class="form-control" id="MailAddressOrgInput" name="mail_address" maxlength="500" placeholder="Почтовый адрес" value="{{ed_center.bank_details.mail_address}}" required>
                        <label for="MailAddressOrgInput">Почтовый адрес</label>
                    </div>
                </div>
                <div class="submit">
                    <input type="submit" class="btn btn-primary" name="add-org" value="Сохранить">
                </div>
            </form>
        </div>
        <div class="positions-step step" data-step="2" {%if stage == 2%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_2_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Контактные данные
                    {% else %}
                        2. Контактные данные
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_2_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input style="display: none;" type="input" name="step" value="2" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_2_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <input style="display: none;" type="input" name="step" value="2" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_2_commentary != "" %}{{center_project_year.step_2_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseContactsForm">
                <div class="table-hdr">
                    <h3>2.2 Добавление сотрудников</h3>
                    <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddEmployeeModal">Добавить сотрудника</button>
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="col">ФИО</th>
                        <th scope="col">Должность</th>
                        <th scope="col">email</th>
                        <th scope="col">Телефон</th>
                    </tr>
                    {% for employee in employees %}
                        <tr>
                            <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeEmployeeModal{{employee.id}}">{{employee.full_name}}</td>
                            <td scope="row">{{employee.position}}</td>
                            <td scope="row">{{employee.email}}</td>
                            <td scope="row">{{employee.phone}}</td>
                        </tr>
                    {% empty %}
                    <tr>
                        <td scope="row" class="none-alert" colspan="4">Не добавлено ни одного сотрудника</td>
                    </tr>
                    {% endfor %}
                </table>
                <h3>2.2. Распределение сотрудников по ролям</h3>
                <div class="positions">
                    {% for position in filled_positions %} 
                        <div class="card position-form">
                            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                <input style="display: none;" type="number" name="position_id" value={{position.position.id}}>
                                <div class="card-header">{{position.position.position}}</div>
                                    <div class="card-body">
                                            <div class="form mb-3 filter-selectpicker">
                                                <select class="selectpicker w-100" title="Ответственное контактное лицо" data-live-search="true" name="employee_id" required>
                                                    <option selected value="{{position.employee.id}}">{{position.employee.get_name}}</option>
                                                    {% for employee in employees %}
                                                        <option value="{{employee.id}}">{{employee.get_name}} ({{employee.position}})</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            {% if position.position.is_basis_needed %}
                                                <div class="mb-3">
                                                    <input type="input" class="form-control" name="acts_basis" maxlength="500" value="{{position.acts_basis}}" placeholder="Основание" required>
                                                </div>
                                            {% endif %}
                                    </div>
                                    <div class="card-footer">
                                            <input type="submit" class="btn btn-outline-primary" name="change-position" value="Изменить">
                                    </div>
                            </form>
                        </div>
                    {% endfor %}
                    {% for position in empty_positions %} 
                        <div class="card position-form">
                            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                                <input style="display: none;" type="number" name="position_id" value={{position.id}}>
                                <div class="card-header">{{position.position}}</div>
                                    <div class="card-body">
                                            <div class="form mb-3 filter-selectpicker">
                                                <select class="selectpicker w-100" title="Ответственное контактное лицо" data-live-search="true" name="employee_id" required>
                                                    {% for employee in employees %}
                                                        <option value="{{employee.id}}">{{employee.get_name}} ({{employee.position}})</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            {% if position.is_basis_needed %}
                                                <div class="mb-3">
                                                    <input type="input" class="form-control" name="acts_basis" maxlength="500" placeholder="Основание" required>
                                                </div>
                                            {% endif %}
                                    </div>
                                    <div class="card-footer">
                                            <input type="submit" class="btn btn-primary" name="add-position" value="Сохранить">
                                    </div>
                            </form>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="programs-step step" data-step="3" {%if stage == 3%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_3_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные о программах, планируемых к реализации
                    {% else %}
                        3. Данные о программах, планируемых к реализации
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_3_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input style="display: none;" type="input" name="step" value="3" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_3_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <input style="display: none;" type="input" name="step" value="3" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_3_commentary != "" %}{{center_project_year.step_3_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapsePrograms">
                <div class="table-hdr">
                    <h3>Список программ</h3>
                    <div style="display: flex; gap: 15px;">
                        <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                            <button class="btn btn-outline-primary" name="export-programs">Скачать список программ в эксель</button>
                        </form>
                        <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddProgramModal">Добавить программу</button>
                    </div>
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="col">№</th>
                        <th scope="col">Название</th>
                        <th scope="col">Направление программы</th>
                        <th scope="col">Профессия</th>
                        <th scope="col">Вид программы</th>
                        <th scope="col">Колво часов</th>
                        <th scope="col">Обеспечение</th>
                        <th scope="col">Форма обучения</th>
                        <th scope="col">Входные требования</th>
                    </tr>
                    {% for program in programs %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeProgramModal{{program.id}}">{{program.program_name}}</td>
                            <td scope="row">{{program.competence}}</td>
                            <td scope="row">{{program.profession}}</td>
                            <td scope="row">{{program.get_program_type_display}}</td>
                            <td scope="row">{{program.duration}}</td>
                            <td scope="row">
                                {{program.num_teachers}} педагогов <br>
                                {{program.num_workshops}} аудиторий 
                            </td>
                            <td scope="row">{{program.get_education_form_display}}</td>
                            <td scope="row">{{program.get_entry_requirements_display}}</td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="9">Не добавлено ни одной программы</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="teachers-step step" data-step="4" {%if stage == 4%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_4_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные о кадровом обеспечении образовательного процесса
                    {% else %}
                        4. Данные о кадровом обеспечении образовательного процесса
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_4_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input style="display: none;" type="input" name="step" value="4" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_4_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <input style="display: none;" type="input" name="step" value="4" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_4_commentary != "" %}{{center_project_year.step_4_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseTeachers">
                <div class="table-hdr">
                    <h3>Список педагогов</h3>
                    <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddTeacherModal">Добавить педагога</button>
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="col">№</th>
                        <th scope="col">ФИО</th>
                        <th scope="col">Тип трудоустройства</th>
                        <th scope="col">Уровень образования</th>
                        <th scope="col">Специальность и квалификация</th>
                        <th scope="col">Ученая степень/должность</th>
                        <th scope="col">Наличие опыта педагогической и/или производственной деятельности</th>
                        <th scope="col">Наличие доп. проф. образования по профилю программы за последние 3 года и (или) опыт по профилю программы.</th>
                    </tr>
                    {% for teacher in teachers %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td scope="row" style="white-space: nowrap;" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeTeacherModal{{teacher.id}}">{{teacher.full_name}}</td>
                            <td scope="row">{{teacher.get_employment_type_display}}</td>
                            <td scope="row">{{teacher.get_education_level_display}}</td>
                            <td scope="row">{{teacher.education_major}}</td>
                            <td scope="row">{{teacher.position}}</td>
                            <td scope="row">{{teacher.experience}}</td>
                            <td scope="row">{{teacher.additional_education}}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="9">Не добавлено ни одного педагога</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="workshops-step step" data-step="5" {%if stage == 5%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_5_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Данные о материально-техническом обеспечении
                    {% else %}
                        5. Данные о материально-техническом обеспечении
                    {% endif %}
                </h2>
                
                {% if user.is_superuser and center_project_year.step_5_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input style="display: none;" type="input" name="step" value="5" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_5_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <input style="display: none;" type="input" name="step" value="5" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_5_commentary != "" %}{{center_project_year.step_5_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseWorkshop">
                <div class="table-hdr">
                    <h3>Список материально-технического обеспечения</h3>
                    <button class="btn btn-primary add-employee-mdl" data-bs-toggle="modal" data-bs-target="#AddWorkshopModal">Добавить помещение</button>
                </div>
                <table class="table">
                    <tr class=""> 
                        <th scope="row">№</th>
                        <th scope="col">Наименование аудитории</th>
                        <th scope="col">Вид занятий</th>
                        <th scope="col">Оборудование, программное обеспечение</th>
                    </tr>
                    {% for workshop in workshops %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td scope="row" class="data-bs-target" data-bs-toggle="modal" data-bs-target="#ChangeWorkshopModal{{workshop.id}}">{{workshop.name}}</td>
                            <td scope="row">{{workshop.get_classes_type_display}}</td>
                            <td scope="row">{{workshop.equipment}}</td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td scope="row" class="none-alert" colspan="9">Не добавлено ни одной мастерской</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="indicators-step step" data-step="6" {%if stage == 6%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr">
                <h2>
                    {% if center_project_year.step_6_check %}
                        <img class="check-img" src="{% static 'education_centers/img/check.png' %}" alt="check-icon"> Показатели эффективности участника ПКО
                    {% else %}
                        6. Показатели эффективности участника ПКО
                    {% endif %}
                </h2>
                {% if user.is_superuser and center_project_year.step_6_check == False %}
                    <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                        <input style="display: none;" type="input" name="step" value="6" required>
                        <button class="btn btn-success" name="approve-step">Подтвердить</button>
                    </form>
                {% endif %}
            </div>
            {% if user.is_superuser or center_project_year.step_6_commentary != "" %}
                <h3>Комментарий</h3>
                <form class="comment-form" action="{% url 'ed_center_application' ed_center.id %}" method="post">
                    <input style="display: none;" type="input" name="step" value="6" required>
                    <div class="mb-3">
                        <textarea class="form-control" name="step_commentary" rows="3" {% if user.is_superuser == False %}disabled{% endif %}>{% if center_project_year.step_6_commentary != "" %}{{center_project_year.step_6_commentary}}{% endif %}</textarea>
                    </div>
                    {% if user.is_superuser %}
                        <div class="submit"><button class="btn btn-primary" name="step-comment">Сохранить</button></div>
                    {% endif %}
                </form>
            {% endif %}
            <div class="collapse show" id="collapseIndicators">
                <form action="" method="post">
                    <table class="table">
                        <tr>
                            <th scope="row">№</th>
                            <th scope="col">Показатель эффективности</th>
                            <th scope="col">2021</th>
                            <th scope="col">2022</th>
                        </tr>
                        {% for indicator in indicators %}
                            <tr>
                                <td scope="row">{{ forloop.counter }}</td>
                                <td scope="row">{{indicator.name}}</td>
                                <td scope="row"><input type="input" class="form-control" name="{{indicator.id}}_2021" placeholder="" value="{{indicator.ed_center_indicator_2021}}" required></td>
                                <td scope="row"><input type="input" class="form-control" name="{{indicator.id}}_2022" placeholder="" value="{{indicator.ed_center_indicator_2022}}" required></td>
                            </tr>
                        {% endfor %}
                    </table>
                    <h3>6.1 Доп. сведения участника ПКО</h3>
                    {% for indicator in free_indicators %}
                        <div class="mb-3 free-indicator">
                            <label for="NotesIndicatorInput{{indicator.id}}" class="form-label">{{indicator.name}}</label>
                            <textarea class="form-control" id="NotesIndicatorInput{{indicator.id}}" name="{{indicator.id}}" rows="3">{{indicator.ed_center_indicator}}</textarea>
                        </div>
                    {% endfor %}
                    <div class="submit">
                        <input type="submit" class="btn btn-primary" name="add-indicators" value="Сохранить">
                    </div>
                </form>
            </div>
        </div>
        <div class="quota-step step" data-step="7" {%if stage == 7%}style="display:block;"{%else%}style="display:none;"{%endif%}>
            <div class="step-hdr" style="display: flex;flex-direction: column;">
                <h2>Квота</h2>
                <p>Укажите кол-во граждан, которые соответствуют двум условиям: 
                    <ol>
                        <li>Готовы приступить к обучению в указанный месяц по указанной длительности программ (72, 144, 256)</li>
                        <li>Предварительно по вашим данным подходят под категории ФП "Содействие занятости"</li>
                    </ol>
                </p>
            </div>
            <form action="{% url 'ed_center_application' ed_center.id %}" method="post">
                <div class="form-floating ed-name mb-3">
                    <input type="number" class="form-control" id="Quota72" name="quota_72" value="{{center_qouta.quota_72}}" required>
                    <label for="Quota72">Квота 72ч</label>
                </div>
                <div class="form-floating w-45 mb-3">
                    <input type="number" class="form-control" id="Quota144" name="quota_144" value="{{center_qouta.quota_144}}" required>
                    <label for="Quota144">Квота 144ч</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="number" class="form-control" id="Quota256" name="quota_256" value="{{center_qouta.quota_256}}" required>
                    <label for="Quota256">Квота 256ч</label>
                </div>
                <div class="submit">
                    <input type="submit" class="btn btn-primary" name="set-quota" value="Сохранить">
                </div>
            </form>
        </div>
    </div>
{% endblock %}